// Unfortunately I have to use Discord from time to time, so I put it in a separate Firefox profile exclusively used for it.

// Do not apply these settings on profiles you actually plan to browse on or actively use...

// Goal here is to make the profile as light-weight & minimal as possible. Nothing already in the base profile will be covered here.

// Set Discord as start page

lockPref("browser.startup.homepage", "https://discord.com/channels/@me");
lockPref("browser.startup.page", 1);

lockPref("pdfjs.disabled", true); // Disable built-in PDF Reader

lockPref("reader.parse-on-load.enabled", false); // Disable Reader Mode

lockPref("webgl.disabled", true); // Disable WebGL

lockPref("javascript.options.wasm", false); // Disable WASM

lockPref("privacy.resistFingerprinting", true); // Enable RFP

lockPref("privacy.resistFingerprinting.letterboxing", true); // Enable RFP Letterboxing

lockPref("security.ssl.require_safe_negotiation", true); // Always require safe negotiations, supported by Discord

// Disable Gecko Media Plugins & OpenH264

lockPref("media.gmp-gmpopenh264.enabled", false);
lockPref("media.gmp-gmpopenh264.visible", false);
lockPref("media.gmp-manager.url.override", "");
lockPref("media.gmp-manager.url", "");
lockPref("media.gmp-provider.enabled", false);

// Disable WebCompat Reporter

lockPref("extensions.webcompat-reporter.enabled", false);
lockPref("extensions.webcompat-reporter.newIssueEndpoint", "");
lockPref("ui.new-webcompat-reporter.enabled", false);
lockPref("ui.new-webcompat-reporter.send-more-info-link", false);

lockPref("network.http.referer.XOriginPolicy", 2);

lockPref("dom.security.https_only_mode_send_http_background_request", false); // Never send HTTP background requests

/// Always sanitize data

lockPref("privacy.clearHistory.historyFormDataAndDownloads", true);
lockPref("privacy.clearSiteData.historyFormDataAndDownloads", true);
lockPref("privacy.clearOnShutdown.cookies", true);
lockPref("privacy.clearOnShutdown.downloads", true);
lockPref("privacy.clearOnShutdown.history", true);
lockPref("privacy.clearOnShutdown.offlineApps", true);
lockPref("privacy.clearOnShutdown_v2.cookiesAndStorage", true);
lockPref("privacy.clearOnShutdown_v2.historyFormDataAndDownloads", true);

// Remove undesired Mozilla links & connections

lockPref("app.feedback.baseURL", "");
lockPref("app.support.baseURL", "");
lockPref("app.update.url.details", "");
lockPref("browser.geolocation.warning.infoURL", "");

// Kill Geolocation

lockPref("geo.provider.network.url", "");
lockPref("geo.provider.use_corelocation", false);
lockPref("geo.provider.use_geoclue", false);
lockPref("geo.provider.use_gpsd", false);
lockPref("geo.provider.ms-windows-location", false);
lockPref("permissions.default.geo", 2);

// Always block pop-ups

lockPref("dom.disable_open_during_load", true);

// Fully disable browsing history

lockPref("places.history.enabled", false);

// Remove unnecessary URL Bar shortcuts

lockPref("browser.urlbar.shortcuts.bookmarks", false);
lockPref("browser.urlbar.shortcuts.history", false);
lockPref("browser.urlbar.shortcuts.tabs", false);

// Use Compact Mode for a slimmer UI 

lockPref("browser.compactmode.show", true);

// Never back-up/export bookmarks

lockPref("browser.bookmarks.autoExportHTML", false);
lockPref("browser.bookmarks.max_backups", 0);

// Never show image placeholders

lockPref("browser.display.show_image_placeholders", false);

// Never show Bookmarks toolbar & Prevent showing "Other Bookmarks"

lockPref("browser.toolbars.bookmarks.showOtherBookmarks", false);
lockPref("browser.toolbars.bookmarks.visibility", "never");

// Prevent caching previous tabs

lockPref("browser.sessionstore.max_tabs_undo", 0);
lockPref("browser.sessionhistory.max_total_viewers", 0);

// Disable ETP Heuristics

lockPref("privacy.antitracking.enableWebcompat", false);
lockPref("privacy.restrict3rdpartystorage.heuristic.opened_window_after_interaction", false);
lockPref("privacy.restrict3rdpartystorage.heuristic.recently_visited", false);
lockPref("privacy.restrict3rdpartystorage.heuristic.redirect", false);
lockPref("privacy.restrict3rdpartystorage.heuristic.window_open", false);

// Disable Cookie Banner Blocking, no point

lockPref("cookiebanners.bannerClicking.enabled", false);
lockPref("cookiebanners.cookieInjector.enabled", false);
lockPref("cookiebanners.service.enableGlobalRules", false);
lockPref("cookiebanners.service.enableGlobalRules.subFrames", false);
lockPref("cookiebanners.service.mode", 0);
lockPref("cookiebanners.service.mode.privateBrowsing", 0);
lockPref("cookiebanners.ui.desktop.enabled", false);

// Misc. URL Bar Suggestions

lockPref("browser.search.separatePrivateDefault.urlbarResult.enabled", false);
lockPref("browser.urlbar.clipboard.featureGate", false);
lockPref("browser.urlbar.maxHistoricalSearchSuggestions", 0);
lockPref("browser.urlbar.maxRichResults", 0);
lockPref("browser.urlbar.richSuggestions.featureGate", false);
lockPref("browser.urlbar.suggest.bookmark", false);
lockPref("browser.urlbar.suggest.calculator", false);
lockPref("browser.urlbar.suggest.clipboard", false);
lockPref("browser.urlbar.suggest.engines", false);
lockPref("browser.urlbar.suggest.history", false);
lockPref("browser.urlbar.suggest.openpage", false);
lockPref("browser.urlbar.suggest.remotetab", false);
lockPref("browser.urlbar.unitConversion.enabled", false);
lockPref("keyword.enabled", false);

// Disable Android Debugging

lockPref("devtools.remote.adb.extensionID", "");
lockPref("devtools.remote.adb.extensionURL", "");

// Never automatically search for text without prompting

lockPref("accessibility.typeaheadfind", false);

// Disable Quarantined Domains (Unnecessary since Discord is only site we use...)

lockPref("extensions.quarantinedDomains.enabled", false);

// Kill Firefox Sync

lockPref("browser.newtabpage.activity-stream.fxaccounts.endpoint", "");
lockPref("identity.fxaccounts.auth.uri", "");
lockPref("identity.fxaccounts.autoconfig.uri", "");
lockPref("identity.fxaccounts.commands.remoteTabManagement.enabled", false);
lockPref("identity.fxaccounts.enabled", false);
lockPref("identity.fxaccounts.oauth.enabled", false);
lockPref("identity.fxaccounts.pairing.enabled", false);
lockPref("identity.fxaccounts.remote.oauth.uri", "");
lockPref("identity.fxaccounts.remote.pairing.uri", "");
lockPref("identity.fxaccounts.remote.profile.uri", "");
lockPref("identity.fxaccounts.remote.root", "");
lockPref("identity.fxaccounts.toolbar.defaultVisible", false);
lockPref("identity.fxaccounts.toolbar.enabled", false);
lockPref("identity.sync.tokenserver.uri", "");
lockPref("services.sync.declinedEngines", "addons,bookmarks,forms,history,creditcards,passwords,addresses,tabs,prefs");
lockPref("services.sync.engine.addons", false);
lockPref("services.sync.engine.addresses", false);
lockPref("services.sync.engine.bookmarks", false);
lockPref("services.sync.engine.creditcards", false);
lockPref("services.sync.engine.history", false);
lockPref("services.sync.engine.passwords", false);
lockPref("services.sync.engine.prefs", false);
lockPref("services.sync.engine.tabs", false);

// Misc. Activity Stream, I just use Tabliss anyways...

lockPref("browser.newtabpage.activity-stream.feeds.places", false);
lockPref("browser.newtabpage.activity-stream.feeds.section.highlights", false);
lockPref("browser.newtabpage.activity-stream.feeds.weatherfeed", false);
lockPref("browser.newtabpage.activity-stream.discoverystream.recentSaves.enabled", false);
lockPref("browser.newtabpage.activity-stream.newtabWallpapers.enabled", false);
lockPref("browser.newtabpage.activity-stream.newtabWallpapers.v2.enabled", false);
lockPref("browser.newtabpage.activity-stream.section.highlights.includeBookmarks", false);
lockPref("browser.newtabpage.activity-stream.section.highlights.includeDownloads", false);
lockPref("browser.newtabpage.activity-stream.section.highlights.includeVisited", false);
lockPref("browser.newtabpage.activity-stream.section.highlights.rows", 0);
lockPref("browser.newtabpage.activity-stream.showRecentSaves", false);
lockPref("browser.newtabpage.activity-stream.showWeather", false);

// Disable Animations

lockPref("toolkit.cosmeticAnimations.enabled", false);

// Disable mailto handling

lockPref("browser.mailto.dualPrompt", false);
lockPref("browser.mailto.prompt.os", false);

// Always handle protocols externally
// https://searchfox.org/mozilla-central/source/browser/app/profile/firefox.js#1226

lockPref("network.protocol-handler.expose-all", false);
lockPref("network.protocol-handler.expose.mailto", false); // [DEFAULT]
lockPref("network.protocol-handler.expose.news", false); // [DEFAULT]
lockPref("network.protocol-handler.expose.nntp", false); // [DEFAULT]
lockPref("network.protocol-handler.expose.snews", false); // [DEFAULT]
lockPref("network.protocol-handler.external-default", true); // [FALSE]
lockPref("network.protocol-handler.external.afp", true);
lockPref("network.protocol-handler.external.data", true);
lockPref("network.protocol-handler.external.disk", true);
lockPref("network.protocol-handler.external.disks", true);
lockPref("network.protocol-handler.external.hcp", true);
lockPref("network.protocol-handler.external.help", true);
lockPref("network.protocol-handler.external.htp", true);
lockPref("network.protocol-handler.external.htps", true);
lockPref("network.protocol-handler.external.ie.http", true);
lockPref("network.protocol-handler.external.iehistory", true);
lockPref("network.protocol-handler.external.ierss", true);
lockPref("network.protocol-handler.external.ile", true);
lockPref("network.protocol-handler.external.javascript", true);
lockPref("network.protocol-handler.external.le", true);
lockPref("network.protocol-handler.external.mailto", true); // [DEFAULT]
lockPref("network.protocol-handler.external.mk", true);
lockPref("network.protocol-handler.external.moz-icon", true);
lockPref("network.protocol-handler.external.ms-cxh", true);
lockPref("network.protocol-handler.external.ms-cxh-full", true);
lockPref("network.protocol-handler.external.ms-help", true);
lockPref("network.protocol-handler.external.ms-msdt", true);
lockPref("network.protocol-handler.external.news", true); // [DEFAULT]
lockPref("network.protocol-handler.external.nntp", true); // [DEFAULT]
lockPref("network.protocol-handler.external.ps", true);
lockPref("network.protocol-handler.external.res", true);
lockPref("network.protocol-handler.external.search", true);
lockPref("network.protocol-handler.external.search-ms", true);
lockPref("network.protocol-handler.external.shell", true);
lockPref("network.protocol-handler.external.snews", true); // [DEFAULT]
lockPref("network.protocol-handler.external.tps", true);
lockPref("network.protocol-handler.external.ttp", true);
lockPref("network.protocol-handler.external.ttps", true);
lockPref("network.protocol-handler.external.vbscript", true);
lockPref("network.protocol-handler.external.vnd.ms.radio", true);

/// Kill Browser Password Manager

lockPref("browser.contentblocking.report.endpoint_url", "");
lockPref("browser.contentblocking.report.lockwise.enabled", false);
lockPref("browser.contentblocking.report.lockwise.how_it_works.url", "");
lockPref("browser.contentblocking.report.mobile-android.url", "");
lockPref("browser.contentblocking.report.mobile-ios.url", "");
lockPref("browser.contentblocking.report.monitor.enabled", false);
lockPref("browser.contentblocking.report.monitor.home_page_url", "");
lockPref("browser.contentblocking.report.monitor.how_it_works.url", "");
lockPref("browser.contentblocking.report.monitor.preferences_url", "");
lockPref("browser.contentblocking.report.monitor.sign_in_url", "");
lockPref("browser.contentblocking.report.monitor.url", "");
lockPref("extensions.formautofill.addresses.enabled", false);
lockPref("extensions.formautofill.creditCards.enabled", false);
lockPref("pref.privacy.disable_button.view_passwords", true);
lockPref("privacy.cpd.passwords", true);
lockPref("signon.generation.enabled", false);
lockPref("signon.rememberSignons", false);
lockPref("signon.recipes.remoteRecipes.enabled", false);
lockPref("services.passwordSavingEnabled", false);
lockPref("signon.management.page.breach-alerts.enabled", false);
lockPref("signon.management.page.breachAlertUrl", "");
lockPref("signon.management.page.vulnerable-passwords.enabled", false);