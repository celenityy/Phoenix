// Base Phoenix Mozilla.cfg :p

// The Phoenix shall rise from the ashes of what fell before it.

defaultPref("browser.aboutConfig.showWarning", false);
defaultPref("general.warnOnAboutConfig", false);

// 001 DATA COLLECTION

// A lot of defense in depth...

/// Shield Studies/Normandy
// We also set "DisableFirefoxStudies" in policies 
// https://mozilla.github.io/policy-templates/#disablefirefoxstudies
// https://mozilla.github.io/normandy/
// https://wiki.mozilla.org/Firefox/Shield/Shield_Studies
// https://support.mozilla.org/kb/shield
// https://support.mozilla.org/kb/how-stop-firefox-making-automatic-connections#w_experiments-or-studies
// https://wiki.mozilla.org/Advocacy/heartbeat

lockPref("app.normandy.api_url", "");
lockPref("app.normandy.enabled", false);
lockPref("app.normandy.first_run", false);
lockPref("app.normandy.user_id", "");
lockPref("app.shield.optoutstudies.enabled", false);
lockPref("messaging-system.rsexperimentloader.enabled", false);
lockPref("messaging-system.rsexperimentloader.collection_id", "");
lockPref("toolkit.telemetry.pioneer-new-studies-available", false);

/// WebVTT Testing Events
// https://searchfox.org/mozilla-central/source/modules/libpref/init/StaticPrefList.yaml

lockPref("media.webvtt.testing.events", false);

/// Origin Trials
// https://wiki.mozilla.org/Origin_Trials

lockPref("dom.origin-trials.enabled", false);

/// Crash Reporting
// https://github.com/mozilla-services/socorro
// https://wiki.mozilla.org/Socorro
// https://firefox-source-docs.mozilla.org/tools/sanitizer/asan_nightly.html

lockPref("asanreporter.apiurl", "");
lockPref("asanreporter.clientid", "");
lockPref("breakpad.reportURL", "");
lockPref("browser.crashReports.unsubmittedCheck.autoSubmit2", false); // [DEFAULT]
lockPref("browser.crashReports.unsubmittedCheck.enabled", false); // [DEFAULT]
lockPref("browser.tabs.crashReporting.includeURL", false); // Defense in depth
lockPref("browser.tabs.crashReporting.sendReport", false);
lockPref("toolkit.crashreporter.include_context_heap", false); // Defense in depth

/// X-Frame Options Error Reporting
// https://firefox-source-docs.mozilla.org/toolkit/components/telemetry/data/xfocsp-error-report-ping.html

lockPref("security.xfocsp.errorReporting.automatic", false); // [DEFAULT]
lockPref("security.xfocsp.errorReporting.enabled", false);

/// Coverage
// https://blog.mozilla.org/data/2018/08/20/effectively-measuring-search-in-firefox/

lockPref("toolkit.coverage.enabled", false);
lockPref("toolkit.coverage.endpoint.base", "");
lockPref("toolkit.coverage.opt-out", true); // [HIDDEN]
lockPref("toolkit.telemetry.coverage.opt-out", true); // [HIDDEN]

/// Default Browser Agent
/// We also configure "DisableDefaultBrowserAgent" in policies
// https://mozilla.github.io/policy-templates/#disabledefaultbrowseragent
// https://firefox-source-docs.mozilla.org/toolkit/mozapps/defaultagent/default-browser-agent/index.html

lockPref("default-browser-agent.enabled", false);

/// Misc. Telemetry
/// We also configure "DisableTelemetry" & "ImproveSuggest" in policies 
// https://mozilla.github.io/policy-templates/#disabletelemetry 
// https://mozilla.github.io/policy-templates/#firefoxsuggest
// https://searchfox.org/mozilla-central/source/testing/geckodriver/src/prefs.rs
// https://wiki.mozilla.org/QA/Telemetry
// https://firefox-source-docs.mozilla.org/toolkit/components/telemetry/internals/preferences.html 
// https://searchfox.org/mozilla-central/source/modules/libpref/init/StaticPrefList.yaml
// https://searchfox.org/mozilla-central/source/remote/shared/RecommendedPreferences.sys.mjs
// https://searchfox.org/mozilla-central/source/testing/profiles/perf/user.js

lockPref("browser.newtabpage.activity-stream.feeds.telemetry", false);
lockPref("browser.newtabpage.activity-stream.impressionId", "");
lockPref("browser.newtabpage.activity-stream.telemetry", false);
lockPref("browser.newtabpage.activity-stream.telemetry.structuredIngestion.endpoint", "");
lockPref("browser.newtabpage.activity-stream.telemetry.ut.events", false);
lockPref("browser.places.interactions.enabled", false); // https://searchfox.org/mozilla-central/source/browser/app/profile/firefox.js
lockPref("browser.privacySegmentation.preferences.show", false);
lockPref("browser.rights.3.shown", true);
lockPref("browser.search.serpEventTelemetryCategorization.enabled", false);
lockPref("browser.search.serpMetricsRecordedCounter", 0);
lockPref("browser.urlbar.quicksuggest.dataCollection.enabled", false);
lockPref("datareporting.healthreport.documentServerURI", ""); // [HIDDEN]
lockPref("datareporting.healthreport.logging.consoleEnabled", false); // [HIDDEN]
lockPref("datareporting.healthreport.service.enabled", false); // [HIDDEN]
lockPref("datareporting.healthreport.service.firstRun", false); // [HIDDEN]
lockPref("datareporting.healthreport.uploadEnabled", false);
lockPref("datareporting.policy.dataSubmissionEnabled", false);
lockPref("datareporting.policy.dataSubmissionPolicyAccepted", false);
lockPref("datareporting.policy.dataSubmissionPolicyBypassNotification", true);
lockPref("datareporting.policy.firstRunURL", "");
lockPref("dom.ipc.processHangMonitor", false);
lockPref("dom.ipc.reportProcessHangs", false);
lockPref("dom.security.unexpected_system_load_telemetry_enabled", false);
lockPref("hangmonitor.timeout", 0);
lockPref("network.jar.record_failure_reason", false);
lockPref("network.traffic_analyzer.enabled", false);
lockPref("network.trr.confirmation_telemetry_enabled", false);
lockPref("identity.fxaccounts.telemetry.clientAssociationPing.enabled", false);
lockPref("identity.fxaccounts.account.telemetry.sanitized_uid", "");
lockPref("privacy.trackingprotection.emailtracking.data_collection.enabled", false);
lockPref("security.app_menu.recordEventTelemetry", false);
lockPref("security.certerrors.recordEventTelemetry", false);
lockPref("security.protectionspopup.recordEventTelemetry", false);
lockPref("toolkit.content-background-hang-monitor.disabled", true);
lockPref("toolkit.telemetry.archive.enabled", false);
lockPref("toolkit.telemetry.bhrPing.enabled", false);
lockPref("toolkit.telemetry.cachedClientID", "");
lockPref("toolkit.telemetry.dap.helper.hpke", "");
lockPref("toolkit.telemetry.dap.helper.url", "");
lockPref("toolkit.telemetry.dap.leader.hpke", "");
lockPref("toolkit.telemetry.dap.leader.url", "");
lockPref("toolkit.telemetry.dap_enabled", false);
lockPref("toolkit.telemetry.dap_helper", "");
lockPref("toolkit.telemetry.dap_helper_owner", "");
lockPref("toolkit.telemetry.dap_leader", "");
lockPref("toolkit.telemetry.dap_leader_owner", "");
lockPref("toolkit.telemetry.dap_task1_enabled", false);
lockPref("toolkit.telemetry.dap_task1_taskid", "");
lockPref("toolkit.telemetry.dap_visit_counting_enabled", false);
lockPref("toolkit.telemetry.dap_visit_counting_experiment_list", "[]");
lockPref("toolkit.telemetry.debugSlowSql", false);
lockPref("toolkit.telemetry.enabled", false);
lockPref("toolkit.telemetry.firstShutdownPing.enabled", false);
lockPref("toolkit.telemetry.healthping.enabled", false);
lockPref("toolkit.telemetry.newProfilePing.enabled", false);
lockPref("toolkit.telemetry.pioneerId", ""); // [HIDDEN]
lockPref("toolkit.telemetry.previousBuildID", "");
lockPref("toolkit.telemetry.reportingpolicy.firstRun", false);
lockPref("toolkit.telemetry.server", "data;");
lockPref("toolkit.telemetry.server_owner", "");
lockPref("toolkit.telemetry.shutdownPingSender.enabled", false);
lockPref("toolkit.telemetry.shutdownPingSender.enabledFirstSession", false);
lockPref("toolkit.telemetry.shutdownPingSender.backgroundtask.enabled", false);
lockPref("toolkit.telemetry.testing.suppressPingsender", true);
lockPref("toolkit.telemetry.unified", false);
lockPref("toolkit.telemetry.updatePing.enabled", false);
lockPref("toolkit.telemetry.user_characteristics_ping.opt-out", true);
lockPref("toolkit.telemetry.user_characteristics_ping.send-once", false); // [DEFAULT]
lockPref("toolkit.telemetry.user_characteristics_ping.uuid", "");

/// Misc. UX - Harmless but does not apply to us

lockPref("app.normandy.shieldLearnMoreUrl", "");
lockPref("datareporting.healthreport.infoURL", "");
lockPref("extensions.recommendations.privacyPolicyUrl","");
lockPref("toolkit.crashreporter.infoURL", "");
lockPref("toolkit.datacollection.infoURL", "");

// 002 MOZILLA CRAPâ„¢

/// Firefox Recommendations & "Discovery"
// We also set "ExtensionRecommendations" & "FeatureRecommendations" in policies
// https://mozilla.github.io/policy-templates/#usermessaging
// https://support.mozilla.org/kb/recommendations-firefox
// https://support.mozilla.org/kb/personalized-extension-recommendations

lockPref("browser.dataFeatureRecommendations.enabled", false);
lockPref("browser.discovery.enabled", false);
lockPref("browser.discovery.sites", "");
lockPref("browser.newtabpage.activity-stream.asrouter.userprefs.cfr.addons", false);
lockPref("browser.newtabpage.activity-stream.asrouter.userprefs.cfr.features", false);
lockPref("extensions.getAddons.browseAddons", ""); // Android
lockPref("extensions.getAddons.discovery.api_url", "data:;"); // https://searchfox.org/mozilla-central/source/testing/profiles/common/user.js
lockPref("extensions.getAddons.showPane", false);
lockPref("extensions.htmlaboutaddons.recommendations.enabled", false);
lockPref("extensions.recommendations.themeRecommendationUrl", "");
lockPref("extensions.webservice.discoverURL", "");

/// Fakespot

lockPref("browser.shopping.experience2023.ads.enabled", false);
lockPref("browser.shopping.experience2023.ads.exposure", false);
lockPref("browser.shopping.experience2023.ads.userEnabled", false);
lockPref("browser.shopping.experience2023.active", false);
lockPref("browser.shopping.experience2023.autoOpen.enabled", false);
lockPref("browser.shopping.experience2023.autoOpen.userEnabled", false);
lockPref("browser.shopping.experience2023.enabled", false);
lockPref("browser.shopping.experience2023.optedIn", 2);
lockPref("browser.shopping.experience2023.survey.enabled", false);
lockPref("browser.urlbar.fakespot.featureGate", false);
lockPref("browser.urlbar.suggest.fakespot", false);
lockPref("toolkit.shopping.ohttpConfigURL", "");
lockPref("toolkit.shopping.ohttpRelayURL", "");

/// Pocket
// We also set "DisablePocket", "Pocket", & "SponsoredPocket" in policies 
// https://mozilla.github.io/policy-templates/#disablepocket
// https://mozilla.github.io/policy-templates/#firefoxhome

lockPref("browser.newtabpage.activity-stream.discoverystream.pocket-feed-parameters", "");
lockPref("browser.newtabpage.activity-stream.discoverystream.saveToPocketCard.enabled", false);
lockPref("browser.newtabpage.activity-stream.discoverystream.sendToPocket.enabled", false);
lockPref("browser.newtabpage.activity-stream.feeds.section.topstories", false);
lockPref("browser.newtabpage.activity-stream.section.topstories.rows", 0);
lockPref("browser.urlbar.pocket.featureGate", false);
lockPref("browser.urlbar.suggest.pocket", false);
lockPref("browser.newtabpage.activity-stream.section.highlights.includePocket", false);
lockPref("extensions.pocket.api", "");
lockPref("extensions.pocket.bffApi", "");
lockPref("extensions.pocket.bffRecentSaves", false);
lockPref("extensions.pocket.enabled", false);
lockPref("extensions.pocket.oAuthConsumerKey", "");
lockPref("extensions.pocket.oAuthConsumerKeyBff", "");
lockPref("extensions.pocket.refresh.emailButton.enabled", false);
lockPref("extensions.pocket.refresh.hideRecentSaves.enabled", true);
lockPref("extensions.pocket.showHome", false);
lockPref("extensions.pocket.site", "");

/// Firefox Relay

lockPref("signon.firefoxRelay.base_url", "");
lockPref("signon.firefoxRelay.feature", "disabled");
lockPref("signon.firefoxRelay.learn_more_url", "");
lockPref("signon.firefoxRelay.manage_url", "");
lockPref("signon.firefoxRelay.privacy_policy_url", "");
lockPref("signon.firefoxRelay.terms_of_service_url", "");

/// "Interest-based Content Relevance Ranking"
// https://bugzilla.mozilla.org/show_bug.cgi?id=1886207

lockPref("toolkit.contentRelevancy.enabled", false);
lockPref("toolkit.contentRelevancy.ingestEnabled", false);
lockPref("toolkit.contentRelevancy.log", false);

/// "Top Sites"
// We also set "TopSites" & "SponsoredTopSites" in policies 
// https://mozilla.github.io/policy-templates/#firefoxhome

lockPref("browser.newtabpage.activity-stream.default.sites", "");
lockPref("browser.newtabpage.activity-stream.discoverystream.spocTopsitesPlacement.enabled", false);
lockPref("browser.newtabpage.activity-stream.showSponsoredTopSites", false);
lockPref("browser.newtabpage.activity-stream.feeds.system.topsites", false);
lockPref("browser.newtabpage.activity-stream.feeds.topsites", false);
lockPref("browser.newtabpage.activity-stream.improvesearch.noDefaultSearchTile", true); // [DEFAULT]
lockPref("browser.newtabpage.activity-stream.improvesearch.topSiteSearchShortcuts", false);
lockPref("browser.newtabpage.activity-stream.improvesearch.topSiteSearchShortcuts.havePinned", "");
lockPref("browser.newtabpage.activity-stream.improvesearch.topSiteSearchShortcuts.searchEngines", "");
lockPref("browser.newtabpage.activity-stream.topSitesRows", 0);
lockPref("browser.newtabpage.pinned", "");
lockPref("browser.partnerlink.attributionURL", "");
lockPref("browser.partnerlink.campaign.topsites", "");
lockPref("browser.topsites.component.enabled", false);
lockPref("browser.topsites.contile.cachedTiles", "");
lockPref("browser.topsites.contile.enabled", false); // Make sure still active
lockPref("browser.topsites.contile.endpoint", "");
lockPref("browser.topsites.useRemoteSetting", false);
lockPref("browser.urlbar.sponsoredTopSites", false);
lockPref("browser.urlbar.suggest.topsites", false);

/// Misc. Activity Stream (about:home)
// We also configure "FirefoxHome" in policies
// https://mozilla.github.io/policy-templates/#firefoxhome
// https://searchfox.org/mozilla-central/source/testing/geckodriver/src/prefs.rs

lockPref("browser.newtabpage.activity-stream.asrouter.providers.cfr", "null");
lockPref("browser.newtabpage.activity-stream.asrouter.providers.cfr-fxa", "null");
lockPref("browser.newtabpage.activity-stream.asrouter.providers.message-groups", "null");
lockPref("browser.newtabpage.activity-stream.asrouter.providers.messaging-experiments", "null");
lockPref("browser.newtabpage.activity-stream.asrouter.providers.onboarding", "null");
lockPref("browser.newtabpage.activity-stream.asrouter.providers.snippets", "null");
lockPref("browser.newtabpage.activity-stream.asrouter.useRemoteL10n", false);
lockPref("browser.newtabpage.activity-stream.discoverystream.config", "[]");
lockPref("browser.newtabpage.activity-stream.discoverystream.enabled", false);
lockPref("browser.newtabpage.activity-stream.discoverystream.endpoints", "");
lockPref("browser.newtabpage.activity-stream.discoverystream.endpointSpocsClear", "");
lockPref("browser.newtabpage.activity-stream.discoverystream.essentialReadsHeader.enabled", false);
lockPref("browser.newtabpage.activity-stream.discoverystream.newSponsoredLabel.enabled", false);
lockPref("browser.newtabpage.activity-stream.discoverystream.onboardingExperience.dismissed", true);
lockPref("browser.newtabpage.activity-stream.discoverystream.onboardingExperience.enabled", false);
lockPref("browser.newtabpage.activity-stream.discoverystream.personalization.enabled", false);
lockPref("browser.newtabpage.activity-stream.discoverystream.recs.personalized", false);
lockPref("browser.newtabpage.activity-stream.discoverystream.spocs.personalized", false);
lockPref("browser.newtabpage.activity-stream.discoverystream.spocs-endpoint", "");
lockPref("browser.newtabpage.activity-stream.discoverystream.spocs-endpoint-query", "");
lockPref("browser.newtabpage.activity-stream.discoverystream.sponsored-collections.enabled", false);
lockPref("browser.newtabpage.activity-stream.discoverystream.topicSelection.enabled", false);
lockPref("browser.newtabpage.activity-stream.feeds.discoverystreamfeed", false);
lockPref("browser.newtabpage.activity-stream.feeds.recommendationprovider", false);
lockPref("browser.newtabpage.activity-stream.feeds.section.topstories.options", "{\"hidden\":true}");
lockPref("browser.newtabpage.activity-stream.feeds.snippets", false);
lockPref("browser.newtabpage.activity-stream.showSponsored", false);
lockPref("browser.newtabpage.activity-stream.system.showSponsored", false);
lockPref("browser.newtabpage.activity-stream.tippyTop.service.endpoint", "");
lockPref("messaging-system.askForFeedback", false);

/// Firefox Suggest
// We also configure "FirefoxSuggest" & "UrlbarInterventions" in policies
// https://mozilla.github.io/policy-templates/#firefoxsuggest
// https://mozilla.github.io/policy-templates/#usermessaging
// https://mozilla-services.github.io/merino/firefox.html
// https://github.com/mozilla-services/merino-py

lockPref("browser.newtabpage.activity-stream.discoverystream.merino-feed-experiment", false);
lockPref("browser.newtabpage.activity-stream.discoverystream.merino-provider.enabled", false);
lockPref("browser.newtabpage.activity-stream.discoverystream.merino-provider.endpoint", "");
lockPref("browser.urlbar.addons.featureGate", false);
lockPref("browser.urlbar.groupLabels.enabled", false);
lockPref("browser.urlbar.mdn.featureGate", false);
lockPref("browser.urlbar.merino.endpointURL", "");
lockPref("browser.urlbar.merino.providers", "");
lockPref("browser.urlbar.quicksuggest.contextualOptIn", false);
lockPref("browser.urlbar.quicksuggest.enabled", false);
lockPref("browser.urlbar.quicksuggest.scenario", "offline");
lockPref("browser.urlbar.quicksuggest.shouldShowOnboardingDialog", false);
lockPref("browser.urlbar.quicksuggest.sponsoredIndex", 0);
lockPref("browser.urlbar.suggest.addons", false);
lockPref("browser.urlbar.suggest.mdn", false);
lockPref("browser.urlbar.suggest.quicksuggest.nonsponsored", false);
lockPref("browser.urlbar.suggest.quicksuggest.sponsored", false);
lockPref("browser.urlbar.suggest.trending", false);
lockPref("browser.urlbar.suggest.weather", false);
lockPref("browser.urlbar.suggest.yelp", false);
lockPref("browser.urlbar.trending.featureGate", false);
lockPref("browser.urlbar.weather.featureGate", false);
lockPref("browser.urlbar.yelp.featureGate", false);

/// Mozilla Push & Web Notifications
/// I have yet to see a legitimate use-case for websites using push notifications... but I have very commonly seen it abused for malicious purposes & spam
/// We also set "Notifications" in policies
// https://mozilla.github.io/policy-templates/#permissions
// https://mozilla-push-service.readthedocs.io/en/latest/
// https://mozilla-services.github.io/autopush-rs/

lockPref("dom.push.enabled", true); // [DEFAULT] - Fingerprintable & unnecessary with prefs below
lockPref("dom.push.connection.enabled", false);
lockPref("dom.push.serverURL", "");
lockPref("dom.push.userAgentID", "");
lockPref("permissions.default.desktop-notification", 2);

/// Disable fetching AMO Metadata, used for recommendations & details, unnecessary
// https://support.mozilla.org/kb/how-stop-firefox-making-automatic-connections#w_add-on-metadata-updating

lockPref("extensions.getAddons.cache.enabled", false);

/// Misc. Promotions
// We also set "MoreFromMozilla" in policies
// https://mozilla.github.io/policy-templates/#usermessaging

lockPref("browser.contentblocking.report.hide_vpn_banner", true);
lockPref("browser.contentblocking.report.proxy.enabled", false);
lockPref("browser.contentblocking.report.proxy_extension.url", "");
lockPref("browser.contentblocking.report.show_mobile_app", false);
lockPref("browser.contentblocking.report.vpn_sub_id", "");
lockPref("browser.contentblocking.report.vpn.url", "");
lockPref("browser.contentblocking.report.vpn-android.url", "");
lockPref("browser.contentblocking.report.vpn-ios.url", "");
lockPref("browser.contentblocking.report.vpn-promo.url", "");
lockPref("browser.newtabpage.activity-stream.newtabWallpapers.highlightDismissed", true);
lockPref("browser.newtabpage.activity-stream.newtabWallpapers.highlightEnabled", false);
lockPref("browser.preferences.moreFromMozilla", false);
lockPref("browser.privatebrowsing.vpnpromourl", "");
lockPref("browser.promo.cookiebanners.enabled", false);
lockPref("browser.promo.focus.enabled", false);
lockPref("browser.promo.pin.enabled", false);
lockPref("browser.protections_panel.infoMessage.seen", true); // Disables ETP Banner
lockPref("browser.vpn_promo.enabled", false);
lockPref("cookiebanners.ui.desktop.showCallout", false);
lockPref("identity.fxaccounts.toolbar.pxiToolbarEnabled", false);
lockPref("identity.fxaccounts.toolbar.pxiToolbarEnabled.monitorEnabled", false);
lockPref("identity.fxaccounts.toolbar.pxiToolbarEnabled.relayEnabled", false);
lockPref("identity.fxaccounts.toolbar.pxiToolbarEnabled.vpnEnabled", false);
lockPref("identity.mobilepromo.android", "");
lockPref("identity.mobilepromo.ios", "");
lockPref("identity.sendtabpromo.url", "");

/// Kill about:welcome & Onboarding
/// We also set "OverrideFirstRunPage", "OverridePostUpdatePage", & "SkipOnboarding" in policies
// https://mozilla.github.io/policy-templates/#overridefirstrunpage
// https://mozilla.github.io/policy-templates/#overridepostupdatepage
// https://mozilla.github.io/policy-templates/#usermessaging

lockPref("browser.aboutwelcome.enabled", false);
lockPref("browser.aboutwelcome.screens", "");
lockPref("browser.aboutwelcome.showModal", false);
lockPref("browser.EULA.override", true); // https://searchfox.org/mozilla-central/source/testing/profiles/perf/user.js
lockPref("browser.migrate.content-modal.about-welcome-behavior", "autoclose");
lockPref("browser.startup.homepage_override.mstone", "ignore");
lockPref("browser.suppress_first_window_animation", true);
lockPref("browser.usedOnWindows10.introURL", ""); // https://searchfox.org/mozilla-central/source/remote/shared/RecommendedPreferences.sys.mjs
lockPref("startup.homepage_override_url", "");
lockPref("startup.homepage_override_url_nimbus", "");
lockPref("startup.homepage_welcome_url", "");
lockPref("startup.homepage_welcome_url.additional", "");

/// Kill UI Tour & Misc. "Feature Tours"

lockPref("browser.firefox-view.feature-tour", "{\"screen\":\"\",\"complete\":true}");
lockPref("browser.firefox-view.view-count", 0); // Prevent logging # of times you use View
lockPref("browser.pdfjs.feature-tour", "{\"screen\":\"\",\"complete\":true}");
lockPref("browser.uitour.enabled", false);
lockPref("browser.uitour.requireSecure", true); // [DEFAULT]
lockPref("browser.uitour.surveyDuration", 0);
lockPref("browser.uitour.url", "");

/// Prevent Mozilla domains from having special privileges
// https://firefox-source-docs.mozilla.org/dom/ipc/process_model.html#privileged-mozilla-content

lockPref("browser.tabs.remote.separatePrivilegedMozillaWebContentProcess", false);
lockPref("browser.tabs.remote.separatedMozillaDomains", "");
lockPref("dom.ipc.processCount.privilegedmozilla", 0);
defaultPref("extensions.webextensions.restrictedDomains", "");
lockPref("permissions.manager.defaultsUrl", "");
lockPref("privacy.resistFingerprinting.block_mozAddonManager", true);
lockPref("svg.context-properties.content.allowed-domains", "");
lockPref("webchannel.allowObject.urlWhitelist", "");

/// Remove Mozilla URL tracking params

defaultPref("app.releaseNotesURL", "https://www.mozilla.org/%LOCALE%/firefox/%VERSION%/releasenotes");
defaultPref("app.releaseNotesURL.aboutDialog", "https://www.mozilla.org/%LOCALE%/firefox/%VERSION%/releasenotes");
defaultPref("app.releaseNotesURL.prompt", "https://www.mozilla.org/%LOCALE%/firefox/%VERSION%/releasenotes");
defaultPref("extensions.getAddons.search.browseURL", "https://addons.mozilla.org/%LOCALE%/firefox/search?q=%TERMS%");

/// Firefox View

defaultPref("browser.firefox-view.search.enabled", false);
defaultPref("browser.firefox-view.virtual-list.enabled", false);
defaultPref("browser.tabs.firefox-view-newIcon", false);
defaultPref("browser.tabs.firefox-view-next", false);

// 003 Search & URL Bar

/// Prevent search engines from remotely updating
// https://firefox-source-docs.mozilla.org/toolkit/search/Preferences.html#hidden

lockPref("browser.search.update", false);

/// Allow adding custom search engines in about:preferences#search

defaultPref("browser.urlbar.update2.engineAliasRefresh", true);

/// Never trim URLs

lockPref("browser.urlbar.trimHttps", false);
lockPref("browser.urlbar.trimURLs", false);

/// Allow using a different search engine in Private Windows vs. Normal Windows

defaultPref("browser.search.separatePrivateDefault.ui.enabled", true);

// Prompt to use Private Browsing

defaultPref("browser.search.separatePrivateDefault.urlbarResult.enabled", true);

// Remove Search Engine Placeholders

lockPref("browser.urlbar.placeholderName", "");
lockPref("browser.urlbar.placeholderName.private", "");

/// Always show Punycode - Helps prevent phishing & IDN Homograph Attacks
// https://wikipedia.org/wiki/IDN_homograph_attack

defaultPref("network.IDN_show_punycode", true);

/// Never autofill/autocomplete URLs

lockPref("browser.urlbar.autoFill", false);

// Always show URL instead of search terms

lockPref("browser.urlbar.showSearchTerms.enabled", false);
lockPref("browser.urlbar.showSearchTerms.featureGate", false);

/// Enforce that JavaScript URLS are excluded from results

lockPref("browser.urlbar.filter.javascript", true); // [DEFAULT]

/// Disable "Recent Searches" being suggested since we disable Search & Form History anyways

lockPref("browser.urlbar.recentsearches.featureGate", false); 
lockPref("browser.urlbar.suggest.recentsearches", false);

// Nice to have

defaultPref("browser.urlbar.clipboard.featureGate", false);
defaultPref("browser.urlbar.suggest.bookmark", true);
defaultPref("browser.urlbar.suggest.calculator", true);
defaultPref("browser.urlbar.suggest.clipboard", false);
defaultPref("browser.urlbar.suggest.engines", false);
defaultPref("browser.urlbar.suggest.history", false);
defaultPref("browser.urlbar.suggest.openpage", true);
defaultPref("browser.urlbar.unitConversion.enabled", true);

// 004 Implicit Connections

/// Disable Network Prefetching
// We also set "NetworkPrediction" in policies
// https://mozilla.github.io/policy-templates/#networkprediction
// https://developer.mozilla.org/docs/Glossary/Prefetch

lockPref("browser.places.speculativeConnect.enabled", false);
lockPref("browser.urlbar.speculativeConnect.enabled", false);
lockPref("network.dns.disablePrefetch", true);
lockPref("network.dns.disablePrefetchFromHTTPS", true); // [DEFAULT]
lockPref("network.http.speculative-parallel-limit", 0);
lockPref("network.predictor.enable-hover-on-ssl", false); // [DEFAULT]
lockPref("network.predictor.enable-prefetch", false); // [DEFAULT]
lockPref("network.predictor.enabled", false);
lockPref("network.prefetch-next", false);

/// Disable Search Suggestions
/// We also set "SearchSuggestEnabled" in policies
// https://mozilla.github.io/policy-templates/#searchsuggestenabled

lockPref("browser.search.suggest.enabled", false);
lockPref("browser.search.suggest.enabled.private", false);
lockPref("browser.urlbar.showSearchSuggestionsFirst", false);
lockPref("browser.urlbar.suggest.searches", false);

/// Prevent leaking single word searches to DNS provider
/// We also set "GoToIntranetSiteForSingleWordEntryInAddressBar" in policies
// https://mozilla.github.io/policy-templates/#gotointranetsiteforsinglewordentryinaddressbar

lockPref("browser.fixup.dns_first_for_single_words", false); // [DEFAULT]
lockPref("browser.urlbar.dnsResolveSingleWordsAfterSearch", 0);

/// Prevent middle click on new tab button opening URLs or searches from clipboard

lockPref("browser.tabs.searchclipboardfor.middleclick", false);

// 005 HTTP(S) - Mixed Content & General Network Hardening

/// Enforce using HTTPS as much as possible

lockPref("dom.security.https_first", true);
lockPref("dom.security.https_first_pbm", true); // [DEFAULT]
lockPref("dom.security.https_first_schemeless", true);
lockPref("dom.security.https_only_mode", true);
lockPref("dom.security.https_only_mode.upgrade_local", true);
lockPref("dom.security.https_only_mode_pbm", true);
lockPref("security.mixed_content.block_active_content", true);
lockPref("security.mixed_content.block_display_content", true);
lockPref("security.mixed_content.upgrade_display_content", true);
lockPref("security.mixed_content.upgrade_display_content.audio", true); // [DEFAULT]
lockPref("security.mixed_content.upgrade_display_content.image", true); // [DEFAULT]
lockPref("security.mixed_content.upgrade_display_content.video", true); // [DEFAULT]

/// Show suggestions when an HTTPS page can not be found 

defaultPref("dom.security.https_only_mode_error_page_user_suggestions", true);

/// Always warn on insecure webpages

lockPref("security.insecure_connection_text.enabled", true);
lockPref("security.insecure_connection_text.pbmode.enabled", true);
lockPref("security.ssl.treat_unsafe_negotiation_as_broken", true);
lockPref("security.warn_submit_secure_to_insecure", true); // Warn when submitting a form from HTTP to HTTPS

/// Show detailed information on insecure warning pages

defaultPref("browser.xul.error_pages.expert_bad_cert", true);

/// Disable TLS1.3 0-RTT (Not forward secret)
// https://github.com/tlswg/tls13-spec/issues/1001

lockPref("security.tls.enable_0rtt_data", false);

/// Enforce preloading intermediates
// https://wiki.mozilla.org/Security/CryptoEngineering/Intermediate_Preloading

lockPref("security.remote_settings.intermediates.enabled", true); // [DEFAULT]

/// Never downgrade to insecure TLS 1.0/1.1

lockPref("security.tls.insecure_fallback_hosts", ""); // [DEFAULT]
lockPref("security.tls.version.enable-deprecated", false); // [DEFAULT]

/// Enforce TLS 1.3 downgrade protection
// https://bugzilla.mozilla.org/show_bug.cgi?id=1576790

lockPref("security.tls.hello_downgrade_check", true); // [DEFAULT]

/// Only load secure websockets from HTTPS pages

lockPref("network.websocket.allowInsecureFromHTTPS", false); // [DEFAULT]

/// Enforce blocking additional ports

lockPref("network.security.ports.banned.override", ""); // [DEFAULT]

/// Enable Post Quantum Key Agreement (Kyber)
/// We also set "PostQuantumKeyAgreementEnabled" in policies
// https://mozilla.github.io/policy-templates/#postquantumkeyagreementenabled

lockPref("network.http.http3.enable_kyber", true);
lockPref("security.tls.enable_kyber", true);

/// Enforce MITM Detection
// https://bugzilla.mozilla.org/show_bug.cgi?id=1529643

lockPref("security.certerrors.mitm.priming.enabled", true); // [DEFAULT]

/// Disable Captive Portal & Connectivity Checks
// We also set "CaptivePortal" in policies
// https://support.mozilla.org/kb/how-stop-firefox-making-automatic-connections#w_network-detection
// https://www.eff.org/deeplinks/2017/08/how-captive-portals-interfere-wireless-security-and-privacy

lockPref("captivedetect.canonicalContent", "");
lockPref("captivedetect.canonicalURL", "");
lockPref("network.captive-portal-service.enabled", false);
lockPref("network.connectivity-service.DNSv4.domain", "");
lockPref("network.connectivity-service.DNSv6.domain", "");
lockPref("network.connectivity-service.enabled", false);
lockPref("network.connectivity-service.IPv4.url", "");
lockPref("network.connectivity-service.IPv6.url", "");

/// Proxy
// We also set "UseProxyForDNS" in policies
// https://mozilla.github.io/policy-templates/#proxy

lockPref("network.file.disable_unc_paths", true);
lockPref("network.gio.supported-protocols", "");
lockPref("network.proxy.socks_remote_dns", true);
lockPref("network.proxy.socks5_remote_dns", true);

// 006 DNS

/// We also set "DNSOverHTTPS" in policies
// https://mozilla.github.io/policy-templates/#dnsoverhttps

/// Disable Mozilla DoH Rollout

lockPref("doh-rollout.disable-heuristics", true);
lockPref("doh-rollout.enabled", false);
lockPref("doh-rollout.skipHeuristicsCheck", true);
lockPref("doh-rollout.uri", "");
lockPref("network.trr.default_provider_uri", "");

/// Enable DoH & Set to Quad9 by default
/// We also set "DNSOverHTTPS" in policies
// https://mozilla.github.io/policy-templates/#dnsoverhttps

defaultPref("network.trr.custom_uri", "https://dns.quad9.net/dns-query");
defaultPref("network.trr.mode", 3);
defaultPref("network.trr.uri", "https://dns.quad9.net/dns-query");

/// Improve list of built-in DoH Providers

defaultPref("doh-rollout.provider-list", '[{"UIName":"Quad9 - Real-time Malware Protection","uri":"https://dns.quad9.net/dns-query"}, {"UIName":"DNS0 (ZERO) - Hardened Real-time Malware Protection","uri":"https://zero.dns0.eu"}, {"UIName":"DNS0 - Real-time Malware Protection","uri":"https://dns0.eu"}, {"UIName":"Mullvad - Ad/Tracking/Limited Malware Protection","uri":"https://base.dns.mullvad.net/dns-query"}, {"UIName":"AdGuard (Public) - Ad/Tracking Protection","uri":"https://dns.adguard-dns.com/dns-query"}, {"UIName":"Mullvad - No Filtering","uri":"https://dns.mullvad.net/dns-query"}, {"UIName":"Wikimedia - No Filtering","uri":"https://wikimedia-dns.org/dns-query"}, {"UIName":"AdGuard (Public) - No Filtering","uri":"https://unfiltered.adguard-dns.com/dns-query"}, {"UIName":"DNS0 - Kids","uri":"https://kids.dns0.eu"}, {"UIName":"Mullvad - Family","uri":"https://family.dns.mullvad.net/dns-query"}, {"UIName":"AdGuard (Public) - Family Protection","uri":"https://family.adguard-dns.com/dns-query"}, {"UIName":"Mullvad - Ad/Tracking/Limited Malware/Social Media Protection","uri":"https://extended.dns.mullvad.net/dns-query"}, {"UIName":"Mullvad - Ad/Tracking/Limited Malware/Social Media/Adult/Gambling Protection","uri":"https://all.dns.mullvad.net/dns-query"}]');

/// Skip DoH Connectivity Checks

lockPref("network.connectivity-service.DNS_HTTPS.domain", "");
lockPref("network.trr.confirmationNS", "skip");

/// Never disable DoH from registry checks
// https://searchfox.org/mozilla-central/source/modules/libpref/init/StaticPrefList.yaml

lockPref("network.notify.checkForNRPT", false);
lockPref("network.notify.checkForProxies", false);

/// Enforce EncryptedClientHello
// We also set "DisableEncryptedClientHello" in policies
// https://mozilla.github.io/policy-templates/#disableencryptedclienthello
// https://blog.cloudflare.com/announcing-encrypted-client-hello

lockPref("network.dns.echconfig.enabled", true); // [DEFAULT]
lockPref("network.dns.http3_echconfig.enabled", true); // [DEFAULT]

/// Enable Native DNS HTTPS Lookups

defaultPref("network.dns.native_https_query", true);

// 007 CERTIFICATES

/// Enforce OCSP & Stapling

lockPref("security.OCSP.enabled", 1); // [DEFAULT]
lockPref("security.ssl.enable_ocsp_must_staple", true); // [DEFAULT]
lockPref("security.ssl.enable_ocsp_stapling", true); // [DEFAULT]

/// Hard-fail OCSP by default
// Personally have not ran into any issues from this in YEARS... & it provides a fairly significant security improvement
// Can reconsider if people start having issues

defaultPref("security.OCSP.require", true);

/// Enable CRLite & use where possible

lockPref("security.pki.crlite_mode", 2);
lockPref("security.remote_settings.crlite_filters.enabled", true);

/// Make exceptions for certificate errors session only

lockPref("security.certerrors.permanentOverride", false);

/// Enforce Strict Certificate Pinning

lockPref("security.cert_pinning.enforcement_level", 2);

// 008 DOWNLOADS

/// Always prompt before downloading files
/// We also set "PromptForDownloadLocation" in policies
// https://mozilla.github.io/policy-templates/#promptfordownloadlocation

lockPref("browser.download.always_ask_before_handling_new_types", true);
lockPref("browser.download.useDownloadDir", false);

// Always notify when downloading files

lockPref("browser.download.alwaysOpenPanel", true); // [DEFAULT]

// Enforce blocking insecure downloads

lockPref("dom.block_download_insecure", true); // [DEFAULT]

// 009 SAFE BROWSING

/// Prevent sending metadata of downloaded files to Google
// https://support.mozilla.org/kb/how-does-phishing-and-malware-protection-work#w_how-does-phishing-and-malware-protection-work-in-firefox
// https://feeding.cloud.geek.nz/posts/how-safe-browsing-works-in-firefox/

lockPref("browser.safebrowsing.downloads.remote.enabled", false);
lockPref("browser.safebrowsing.downloads.remote.url", "");

/// Enforce that no data is shared with Google
// https://bugzilla.mozilla.org/show_bug.cgi?id=1351147

lockPref("browser.safebrowsing.provider.google.dataSharing.enabled", false); // [DEFAULT] Android
lockPref("browser.safebrowsing.provider.google4.dataSharing.enabled", false); // [DEFAULT]
lockPref("browser.safebrowsing.provider.google4.dataSharingURL", "");

/// Show advanced details on pages blocked by Safe Browsing by default

defaultPref("browser.xul.error_pages.show_safe_browsing_details_on_load", true);

/// By default, when you report a Safe Browsing false positive, it sends the URL to both Mozilla & Google (NOT PROXIED), as well as your locale to Mozilla
// Ex. https://en-us.phish-error.mozilla.com/?url=example.org - Which redirects you directly to https://safebrowsing.google.com/safebrowsing/report_error/?tpl=mozilla&url=example.org 
// We can improve privacy & speed by sending the domain *only* to Google & without sending your locale to anyone
// We could also potentially strip tpl=mozilla which tells Google the request is from Firefox - though it looks like there is a different page for Firefox users with a better privacy policy, so we will leave it for now
// Unclear whether 'MalwareMistake' is used, but we can set it anyways

defaultPref("browser.safebrowsing.provider.google.reportMalwareMistakeURL", "https://safebrowsing.google.com/safebrowsing/report_error/?tpl=mozilla&url=");
defaultPref("browser.safebrowsing.provider.google.reportPhishMistakeURL", "https://safebrowsing.google.com/safebrowsing/report_error/?tpl=mozilla&url=");
defaultPref("browser.safebrowsing.provider.google4.reportMalwareMistakeURL", "https://safebrowsing.google.com/safebrowsing/report_error/?tpl=mozilla&url=");
defaultPref("browser.safebrowsing.provider.google4.reportPhishMistakeURL", "https://safebrowsing.google.com/safebrowsing/report_error/?tpl=mozilla&url=");

//// Similar behavior also appears to happen when you report a URL to Safe Browsing

defaultPref("browser.safebrowsing.reportPhishURL", "https://safebrowsing.google.com/safebrowsing/report_phish/?tpl=mozilla&url=");

/// Unclear whether these are actually used or not, but looks like Firefox has some kind of functionality to view a "report" from Safe Browsing about the safety, history, & general status of a site
// By default, it unnecessarily redirects from ex. https://safebrowsing.google.com/safebrowsing/diagnostic?site=example.org to https://transparencyreport.google.com/safe-browsing/search?url=example.org
// We can skip the direct to improve speed

defaultPref("browser.safebrowsing.provider.google.reportURL", "https://transparencyreport.google.com/safe-browsing/search?url=");
defaultPref("browser.safebrowsing.provider.google4.reportURL", "https://transparencyreport.google.com/safe-browsing/search?url=");

// 010 GEOLOCATION

/// Prevent Wi-Fi Scanning

lockPref("browser.region.network.scan", false); // [DEFAULT]
lockPref("geo.wifi.scan", false);

/// Disable "Region Updates" & Geo Targetting
// https://firefox-source-docs.mozilla.org/toolkit/modules/toolkit_modules/Region.html
// https://support.mozilla.org/kb/how-stop-firefox-making-automatic-connections#w_geolocation-for-default-search-engine

lockPref("browser.region.local-geocoding", false);
lockPref("browser.region.network.url", "");
lockPref("browser.region.update.enabled", false);
lockPref("browser.search.geoip.url", "");
lockPref("browser.search.region", "US");

/// Deny websites geo permission by default
/// We also set "Location" in policies
// https://mozilla.github.io/policy-templates/#permissions

defaultPref("permissions.default.geo", 2);

/// Geo Provider

defaultPref("geo.provider.network.url", "https://beacondb.net/v1/geolocate"); // Enable experimental geolocation support for BeaconDB, better than nothing for Windows/Linux users
defaultPref("geo.provider.use_corelocation", true); // Enable Apple Location Services for macOS
defaultPref("geo.provider.use_geoclue", false); // Disable Geoclue for Linux distros (at least for now)
defaultPref("geo.provider.ms-windows-location", false); // Disable Microsoft Location Services for Windows users

/// Update info URL to ours so that users receive accurate information

defaultPref("browser.geolocation.warning.infoURL", "https://codeberg.org/Magnesium1062/Phoenix/wiki/Transparency#geolocation");

// 011 WEBRTC

lockPref("media.peerconnection.ice.obfuscate_host_addresses", true);
lockPref("media.peerconnection.ice.proxy_only_if_behind_proxy", true);
lockPref("privacy.webrtc.allowSilencingNotifications", true);
defaultPref("privacy.webrtc.globalMuteToggles", true);
lockPref("privacy.webrtc.hideGlobalIndicator", false);
lockPref("privacy.webrtc.sharedTabWarning", true);

/// Always sandbox Media Transport
// https://searchfox.org/mozilla-central/source/security/sandbox/common/SandboxSettings.cpp

lockPref("media.peerconnection.mtransport_process", true); // [DEFAULT]

// 012 DISK AVOIDANCE

/// Disable Search & Form History - Can be leaked to sites
// We also set "DisableFormHistory" in policies
// https://mozilla.github.io/policy-templates/#disableformhistory
// https://blog.mindedsecurity.com/2011/10/autocompleteagain.html

lockPref("browser.formfill.enable", false);

/// Prevent syncing history by default

defaultPref("services.sync.engine.history", false);

/// Disable caching, might reconsider since we clear cache on exit anyways

defaultPref("browser.cache.disk.enable", false);
defaultPref("browser.cache.disk_cache_ssl", false);
defaultPref("browser.cache.memory.enable", false);
defaultPref("browser.cache.memory.capacity", 0);
lockPref("browser.privatebrowsing.forceMediaMemoryCache", true);

/// Prevent storing unnecessary extra session data

lockPref("browser.sessionstore.privacy_level", 2);

/// Sanitize on exit
// We also configure "SanitizeOnShutdown" in policies
// https://mozilla.github.io/policy-templates/#sanitizeonshutdown-selective

lockPref("privacy.clearHistory.cache", true);
defaultPref("privacy.clearHistory.historyFormDataAndDownloads", true);
lockPref("privacy.clearSiteData.cache", true);
defaultPref("privacy.clearSiteData.historyFormDataAndDownloads", true);
lockPref("privacy.clearOnShutdown.cache", true);
defaultPref("privacy.clearOnShutdown.cookies", true); // If you keep this enabled, you should set "cookiebanners.service.mode" to 2
defaultPref("privacy.clearOnShutdown.downloads", true);
lockPref("privacy.clearOnShutdown.formdata", true);
defaultPref("privacy.clearOnShutdown.history", true);
defaultPref("privacy.clearOnShutdown.offlineApps", true);
lockPref("privacy.clearOnShutdown.sessions", true);
lockPref("privacy.clearOnShutdown_v2.cache", true);
defaultPref("privacy.clearOnShutdown_v2.cookiesAndStorage", true); // If you keep this enabled, you should set "cookiebanners.service.mode" to 2
defaultPref("privacy.clearOnShutdown_v2.historyFormDataAndDownloads", true);
lockPref("privacy.cpd.cache", true);
lockPref("privacy.cpd.formdata", true);
lockPref("privacy.sanitize.sanitizeOnShutdown", true); // Allows selectively clearing data on shutdown

/// Set time range when manually clearing data to "everything" by default

defaultPref("privacy.sanitize.timeSpan", 0);

/// Prevent logging blocked domains in about:protections

lockPref("browser.contentblocking.cfr-milestone.enabled", false);
lockPref("browser.contentblocking.database.enabled", false);

/// Disable favicons in shortcuts, prevents .ico files from persisting even after deletion

lockPref("browser.shell.shortcutFavicons", false);

/// Delete cached files from windows opened with external applications
/// We also set "StartDownloadsInTempDirectory" in policies
// https://mozilla.github.io/policy-templates/#startdownloadsintempdirectory

lockPref("browser.download.start_downloads_in_tmp_dir", true);
lockPref("browser.helperApps.deleteTempFileOnExit", true);

// Prevent exposing content in the window title for Private Browsing windows
// https://searchfox.org/mozilla-central/source/browser/app/profile/firefox.js

lockPref("privacy.exposeContentTitleInWindow.pbm", false);

/// When a file is deleted in Firefox, also remove from session list & history 
// https://searchfox.org/mozilla-central/source/browser/app/profile/firefox.js

lockPref("browser.download.clearHistoryOnDelete", 2);

/// Adds a fire button in Private Browsing Windows to reset session

defaultPref("browser.privatebrowsing.resetPBM.enabled", true);

/// Prevent automatically starting Firefox & restoring session after reboot on Windows

lockPref("toolkit.winRegisterApplicationRestart", false);

/// Disable LaterRun - Tracks profile creation time & number of browser uses
// https://gitlab.torproject.org/tpo/applications/tor-browser/-/issues/41568
// https://bugzilla.mozilla.org/show_bug.cgi?id=1200639

lockPref("browser.laterrun.bookkeeping.profileCreationTime", 0);
lockPref("browser.laterrun.bookkeeping.sessionCount", 0);
lockPref("browser.laterrun.enabled", false);

/// Prevent coloring visited links

lockPref("layout.css.visited_links_enabled", false);

/// Disable collecting & generating background thumbnails

lockPref("browser.pagethumbnails.capturing_disabled", true); // [HIDDEN]

// 013 EXTENSIONS

// Only allow signed extensions

lockPref("extensions.langpacks.signatures.required", true);
lockPref("xpinstall.signatures.required", true); // {DEFAULT}
lockPref("xpinstall.whitelist.required", true); // {DEFAULT}

// Enforce Extension Blocklist

lockPref("extensions.blocklist.enabled", true); // [DEFAULT]

// Never bypass 3rd party extension install prompts

lockPref("extensions.postDownloadThirdPartyPrompt", false);

// Allow LocalCDN to work on quarantined domains

defaultPref("extensions.quarantineIgnoredByUser.{b86e4813-687a-43e6-ab65-0bde4ab75758}", true);

// Allow Mullvads extension to work on quarantined domains

defaultPref("extensions.quarantineIgnoredByUser.{d19a89b9-76c1-4a61-bcd4-49e8de916403}", true);

// 014 PDF.js

/// Disable JavaScript

lockPref("pdfjs.enableScripting", false);

/// Never allow documents to prevent copying text
/// We also set `EnablePermissions` in policies
// https://mozilla.github.io/policy-templates/#pdfjs

lockPref("pdfjs.enablePermissions", false); // [DEFAULT]

/// Prevent checking if default PDF viewer
// https://searchfox.org/mozilla-central/source/browser/app/profile/firefox.js

lockPref("browser.shell.checkDefaultPDF", false);
lockPref("browser.shell.checkDefaultPDF.silencedByUser", true);

/// Never open Microsoft Edge for PDFs
// https://searchfox.org/mozilla-central/source/modules/libpref/init/StaticPrefList.yaml

lockPref("browser.pdf.launchDefaultEdgeAsApp", false);

/// Open PDFs in browser where possible

defaultPref("browser.download.open_pdf_attachments_inline", true);

/// Show sidebar by default when viewing PDFs

defaultPref("pdfjs.sidebarViewOnLoad", 2);

// 015 FINGERPRINTING PROTECTION

/// Set US English as locale by default

defaultPref("intl.accept_languages", "en-US, en");
defaultPref("intl.locale.requested", "en-US");
defaultPref("privacy.spoof_english", 2);

/// Round window sizes

lockPref("privacy.window.maxInnerHeight", 900);
lockPref("privacy.window.maxInnerWidth", 1600);

/// Expose RFP letterboxing to users, but do not enable by default

defaultPref("privacy.resistFingerprinting.letterboxing", false); // [DEFAULT]

/// If RFP is enabled, always randomize canvas

lockPref("privacy.resistFingerprinting.randomDataOnCanvasExtract", true); // [DEFAULT]

/// Disable WebGPU
// https://browserleaks.com/webgpu

lockPref("dom.webgpu.enabled", false); // [DEFAULT]

/// Enforce that WebGL stays disabled if it is disabled

lockPref("webgl.disable-fail-if-major-performance-caveat", false);

/// Prevent using system colors

lockPref("browser.display.use_system_colors", false);

/// Enforce using standard cross-platform widget theme

lockPref("widget.non-native-theme.enabled", true); // [DEFAULT]

// 016 MISC. PRIVACY

/// Enable ETP Strict

lockPref("browser.contentblocking.category", "strict");

/// Enforce Do Not Track & Global Privacy Control

lockPref("privacy.donottrackheader.enabled", true);
lockPref("privacy.globalprivacycontrol.enabled", true);
lockPref("privacy.globalprivacycontrol.functionality.enabled", true);
lockPref("privacy.globalprivacycontrol.pbmode.enabled", true); // [DEFAULT]

/// Disable "Privacy-Preserving Attribution"
// https://support.mozilla.org/kb/privacy-preserving-attribution

lockPref("dom.origin-trials.private-attribution.state", 0);
lockPref("dom.private-attribution.submission.enabled", false);

/// Disable Reporting API
// https://w3c.github.io/reporting/
// https://bugzilla.mozilla.org/show_bug.cgi?id=1492036

lockPref("dom.reporting.enabled", false); // [DEFAULT]
lockPref("dom.reporting.crash.enabled", false);
lockPref("dom.reporting.featurePolicy.enabled", false);
lockPref("dom.reporting.header.enabled", false);

/// Trim cross-origin referers (Like Safari)

lockPref("network.http.referer.XOriginTrimmingPolicy", 2);

/// Restrict referers for trackers

lockPref("network.http.referer.defaultPolicy.trackers", 1);
lockPref("network.http.referer.defaultPolicy.trackers.pbmode", 1);

/// Disable Hyperlink Auditing (Click Tracking)
// https://www.bleepingcomputer.com/news/software/major-browsers-to-prevent-disabling-of-click-tracking-privacy-risk/

lockPref("browser.send_pings", false); // [DEFAULT]
lockPref("browser.send_pings.max_per_link", 0); // [DEFENSE IN DEPTH]
lockPref("browser.send_pings.require_same_host", true); // [DEFENSE IN DEPTH]

/// Improve built-in query stripping to be on par with LibreWolf & Brave
// https://codeberg.org/librewolf/settings/src/branch/master/librewolf.cfg#L77

defaultPref("privacy.query_stripping.strip_list", "__hsfp __hssc __hstc __s _hsenc _openstat dclid fbclid gbraid gclid hsCtaTracking igshid mc_eid ml_subscriber ml_subscriber_hash msclkid oft_c oft_ck oft_d oft_id oft_ids oft_k oft_lk oft_sk oly_anon_id oly_enc_id rb_clickid s_cid twclid vero_conv vero_id wbraid wickedid yclid");

// 017 PASSWORDS & AUTHENTICATION

/// Never Autofill

lockPref("signon.autofillForms", false);
lockPref("signon.autofillForms.http", false); // [DEFAULT]
lockPref("signon.formlessCapture.enabled", false);
lockPref("signon.privateBrowsingCapture.enabled", false);

/// Always allow showing password when hidden

defaultPref("layout.forms.reveal-password-button.enabled", true);
defaultPref("layout.forms.reveal-password-context-menu.enabled", true); // [DEFAULT]

/// Prevent websites from dictating whether to allow filling passwords
// https://blog.0xbadc0de.be/archives/124

lockPref("signon.storeWhenAutocompleteOff", false);

/// Never truncate passwords
// https://www.ghacks.net/2020/05/18/firefox-77-wont-truncate-text-exceeding-max-length-to-address-password-pasting-issues/

lockPref("editor.truncate_user_pastes", false);

/// Enable alerts for breached & vulnerable passwords by default, harmless and never sends passwords or sensitive data to Mozilla
// https://support.mozilla.org/kb/mozilla-monitor-faq#w_does-mozilla-monitor-know-my-passwords
// https://blog.mozilla.org/security/2018/06/25/scanning-breached-accounts-k-anonymity/
// https://searchfox.org/mozilla-central/source/browser/app/profile/firefox.js

defaultPref("signon.management.page.breach-alerts.enabled", true); // [DEFAULT]
defaultPref("signon.management.page.vulnerable-passwords.enabled", true); // [DEFAULT]

/// Enable strong password generation by default

defaultPref("signon.generation.enabled", true); // [DEFAULT]

/// Prevent cross-origin sub-resources from opening HTTP authentication dialogs

lockPref("network.auth.subresource-http-auth-allow", 1);

/// Disable Windows SSO
/// We also configure "WindowsSSO" in policies
// https://mozilla.github.io/policy-templates/#windowssso

lockPref("network.http.windows-sso.enabled", false); // [DEFAULT]

/// Prevent using Negotiate authentication by default 
// https://people.redhat.com/mikeb/negotiate/

defaultPref("network.negotiate-auth.trusted-uris", ""); // [DEFAULT]

/// Enforce crashing on insecure password input

lockPref("intl.allow-insecure-text-input", false); // [DEFAULT]

/// Protect against password spoofing for cross-domain auth requests
// https://bugzilla.mozilla.org/show_bug.cgi?id=791594
// https://searchfox.org/mozilla-central/source/browser/app/profile/firefox.js

lockPref("privacy.authPromptSpoofingProtection", true); // [DEFAULT]

// 019 ATTACK SURFACE REDUCTION

/// Disable JavaScript Just-in-time Compilation (JIT)
// https://microsoftedge.github.io/edgevr/posts/Super-Duper-Secure-Mode/

lockPref("javascript.options.baselinejit", false);
lockPref("javascript.options.ion", false);
lockPref("javascript.options.native_regexp", false); //  https://gitlab.torproject.org/tpo/applications/tor-browser/-/issues/21865 https://searchfox.org/mozilla-central/source/modules/libpref/init/StaticPrefList.yaml
lockPref("javascript.options.wasm_baselinejit", false);

/// Disable ASM.JS (More JIT)
// https://rh0dev.github.io/blog/2017/the-return-of-the-jit/

lockPref("javascript.options.asmjs", false);

/// Disable MathML
// https://cve.mitre.org/cgi-bin/cvekey.cgi?keyword=mathml 

lockPref("mathml.disabled", true);

/// Disable Graphite & SVG OpenType fonts
// https://cve.mitre.org/cgi-bin/cvekey.cgi?keyword=firefox+graphite
// https://cve.mitre.org/cgi-bin/cvekey.cgi?keyword=firefox+svg

lockPref("gfx.font_rendering.graphite.enabled", false);
lockPref("gfx.font_rendering.opentype_svg.enabled", false);

/// Disable WebXR
// https://developer.mozilla.org/docs/Web/API/WebXR_Device_API

lockPref("browser.xr.warning.infoURL", ""); // Harmless but doesn't apply to us
lockPref("permissions.default.xr", 2);

// 022 MISC. SECURITY

/// Disable Accessibility Services
// https://support.mozilla.org/kb/accessibility-services#w_malware-and-adware

lockPref("accessibility.force_disabled", 1);
lockPref("devtools.accessibility.enabled", false);

/// Enforce that Content Analysis is disabled
/// We also set "ContentAnalysis" in policies
// https://mozilla.github.io/policy-templates/#contentanalysis
// https://github.com/chromium/content_analysis_sdk

lockPref("browser.contentanalysis.default_result", 0); // [DEFAULT]
lockPref("browser.contentanalysis.enabled", false); // [DEFAULT]

/// Prevent disabling important security features
/// Yes, this is a real pref.
// https://searchfox.org/mozilla-central/source/testing/profiles/common/user.js

lockPref("security.turn_off_all_security_so_that_viruses_can_take_over_this_computer", false); // [DEFAULT]

/// Enforce Site Isolation & Isolate all websites

lockPref("dom.ipc.processCount.webIsolated", 1);
lockPref("fission.autostart", true); // [DEFAULT]

/// Enable GPU Sandboxing
// https://www.ghacks.net/2023/01/17/firefox-110-will-launch-with-gpu-sandboxing-on-windows/

lockPref("security.sandbox.gpu.level", 1);

/// Disable GNOME Integration
// https://searchfox.org/mozilla-central/source/browser/components/shell/nsGNOMEShellService.cpp

lockPref("browser.gnome-search-provider.enabled", false);

/// Protect against CSRF Attacks (Like Chromium)
// https://web.dev/articles/samesite-cookies-explained
// https://portswigger.net/web-security/csrf/bypassing-samesite-restrictions

lockPref("network.cookie.sameSite.laxByDefault", true);
lockPref("network.cookie.sameSite.noneRequiresSecure", true);
lockPref("network.cookie.sameSite.schemeful", true);

/// Enforce Strict file:// Origin Policy
// https://stuffandnonsense.co.uk/blog/firefoxs_file_uri_origin_policy_and_web_fonts
// https://stackoverflow.com/questions/2856502/css-font-face-not-working-with-firefox-but-working-with-chrome-and-ie

lockPref("security.fileuri.strict_origin_policy", true); // [DEFAULT]

/// Always protect against MIME Exploits
// https://www.pcmag.com/encyclopedia/term/mime-exploit

lockPref("security.block_fileuri_script_with_wrong_mime", true);
lockPref("security.block_Worker_with_wrong_mime", true); // [DEFAULT]

/// Never load Navigator Media Objects & getUserMedia Support in insecure contexts
// https://developer.mozilla.org/docs/Web/API/Navigator/mediaDevices
// https://searchfox.org/mozilla-central/source/modules/libpref/init/StaticPrefList.yaml

lockPref("media.devices.insecure.enabled", false); // [DEFAULT]
lockPref("media.getusermedia.insecure.enabled", false); // [DEFAULT]

// 023 BLOCK COOKIE BANNERS

defaultPref("cookiebanners.service.mode", 1); // Feel free to set this 2 if you keep sanitization of cookies enabled
defaultPref("cookiebanners.service.mode.privateBrowsing", 2);
defaultPref("cookiebanners.service.enableGlobalRules", true);
defaultPref("cookiebanners.ui.desktop.enabled", true);

// 024 MEDIA

/// Always sandbox GMP
// https://searchfox.org/mozilla-central/source/modules/libpref/init/StaticPrefList.yaml

lockPref("media.gmp.insecure.allow", false); // [DEFAULT]

/// Enforce validating signature for GMP when updating
// https://searchfox.org/mozilla-central/source/modules/libpref/init/all.js

lockPref("media.gmp-manager.cert.checkAttributes", true); // [DEFAULT]
lockPref("media.gmp-manager.cert.requireBuiltIn", true); // [DEFAULT]
lockPref("media.gmp-manager.checkContentSignature", true); // [DEFAULT]

/// Disable Autoplay by default

defaultPref("media.autoplay.default", 5);
defaultPref("userContent.player.click_to_play", true); // https://github.com/black7375/Firefox-UI-Fix/wiki/Options#defaults-6

/// DRM
// Garbage technology with freedom, privacy, & security concerns
// We also set "EncryptedMediaExtensions" in policies
// https://mozilla.github.io/policy-templates/#encryptedmediaextensions
// https://www.eff.org/deeplinks/2017/10/drms-dead-canary-how-we-just-lost-web-what-we-learned-it-and-what-we-need-do-next

lockPref("browser.eme.ui.enabled", false);
lockPref("media.clearkey.persistent-license.enabled", false); // [DEFAULT]
lockPref("media.clearkey.test-key-systems.enabled", false); // [DEFAULT]
lockPref("media.eme.enabled", false);
lockPref("media.eme.encrypted-media-encryption-scheme.enabled", false);
lockPref("media.eme.hdcp-policy-check.enabled", false);
lockPref("media.eme.require-app-approval", true); // [DEFENSE IN DEPTH]: Enforce locking DRM behind permission https://searchfox.org/mozilla-central/source/mobile/android/app/geckoview-prefs.js#304
lockPref("media.gmp-widevinecdm.enabled", false);
lockPref("media.gmp-widevinecdm.visible", false);
lockPref("media.gmp-widevinecdm-l1.enabled", false);
lockPref("media.gmp-widevinecdm-l1.visible", false);
lockPref("media.mediadrm-widevinecdm.visible", false); // [ANDROID]: https://searchfox.org/mozilla-central/source/mobile/android/app/geckoview-prefs.js#320

// 025 UPDATES

/// Browser Updates

defaultPref("app.update.badgeWaitTime", 0); // Immediately show badge on hamburger menu when update is available
defaultPref("app.update.notifyDuringDownload", true); // Ensure that users are notified when an update is downloaded
defaultPref("app.update.promptWaitTime", 3600); // Decrease time between update prompts, default is very generous...

/// Enforce Extension Updates
/// We also set "ExtensionUpdate" in policies
// https://mozilla.github.io/policy-templates/#extensionupdate

lockPref("extensions.systemAddon.update.enabled", true); // [DEFAULT]
lockPref("extensions.update.autoUpdateDefault", true); // [DEFAULT]
lockPref("extensions.update.enabled", true); // [DEFAULT]
lockPref("media.gmp-manager.updateEnabled", true);

// 026 DEBUGGING

/// Enforce local debugging only

lockPref("devtools.debugger.force-local", true);
lockPref("devtools.debugger.prompt-connection", true);
lockPref("devtools.debugger.remote-enabled", false);
lockPref("devtools.inspector.remote", false);

/// Ensure that URLs are not being logged in Reader errors

lockPref("reader.errors.includeURLs", false);

/// 027 MISC.

/// Enable Containers & isolate permissions per container

lockPref("permissions.isolateBy.userContext", true);
defaultPref("privacy.userContext.enabled", true);
defaultPref("privacy.userContext.ui.enabled", true);

/// Never hide any extensions in about:debugging

lockPref("devtools.aboutdebugging.showHiddenAddons", true);

/// Enable Profiles UI

defaultPref("browser.profiles.enabled", true);

/// Force pop-up windows to open in new tabs instead

lockPref("browser.link.open_newwindow", 3); // [DEFAULT]
lockPref("browser.link.open_newwindow.restriction", 0);

/// Always block pop-ups by default
/// We also configure "PopupBlocking" in policies
// https://mozilla.github.io/policy-templates/#popupblocking

defaultPref("dom.disable_open_during_load", true); // [DEFAULT]

/// Limit what events can cause pop-ups

defaultPref("dom.popup_allowed_events", "click dblclick");

/// Notify on Pop-up blocking by default

defaultPref("privacy.popups.showBrowserMessage", true);

/// Prevent scripts from moving, resizing, and messing with windows

lockPref("dom.disable_window_flip", true); // {DEFAULT}
lockPref("dom.disable_window_move_resize", true);

/// Never check default browser
/// We also set "DontCheckDefaultBrowser" in policies
// https://mozilla.github.io/policy-templates/#dontcheckdefaultbrowser

lockPref("browser.shell.checkDefaultBrowser", false);
lockPref("browser.shell.skipDefaultBrowserCheckOnFirstRun", true);

/// Disable annoying Web Speech API errors

lockPref("media.webspeech.synth.dont_notify_on_error", true);

// 028 PERFORMANCE
// A lot of these taken from https://github.com/yokoffing/Betterfox/blob/main/Fastfox.js

defaultPref("browser.cache.disk.metadata_memory_limit", 500);
defaultPref("browser.cache.jsbc_compression_level", 3);
defaultPref("browser.sessionstore.max_tabs_undo", 7);
defaultPref("browser.sessionhistory.max_total_viewers", 7);
defaultPref("browser.sessionstore.interval", 60000);
defaultPref("browser.tabs.min_inactive_duration_before_unload", 300000);
defaultPref("browser.toolbars.bookmarks.visibility", "always");
defaultPref("content.notify.interval", 100000); // https://searchfox.org/mozilla-central/rev/c1180ea13e73eb985a49b15c0d90e977a1aa919c/modules/libpref/init/StaticPrefList.yaml#1824-1834
defaultPref("dom.enable_web_task_scheduling", true);  // https://blog.mozilla.org/performance/2022/06/02/prioritized-task-scheduling-api-is-prototyped-in-nightly/
defaultPref("extensions.logging.enabled", false); // [DEFAULT] https://searchfox.org/mozilla-central/source/mobile/android/app/geckoview-prefs.js#232
defaultPref("gfx.canvas.accelerated.cache-items", 4096);
defaultPref("gfx.canvas.accelerated.cache-size", 512);
defaultPref("gfx.content.skia-font-cache-size", 20);
defaultPref("gfx.webrender.all", true);
defaultPref("gfx.webrender.compositor", true);
defaultPref("gfx.webrender.compositor.force-enabled", true);
defaultPref("image.mem.decode_bytes_at_a_time", 32768);
defaultPref("image.mem.shared.unmap.min_expiration_ms", 120000);
defaultPref("layout.css.grid-template-masonry-value.enabled", true); // https://developer.mozilla.org/docs/Web/CSS/CSS_Grid_Layout/Masonry_Layout
defaultPref("layout.css.report_errors", false); // https://searchfox.org/mozilla-central/source/mobile/android/app/geckoview-prefs.js#299
defaultPref("media.cache_readahead_limit", 7200);
defaultPref("media.cache_resume_threshold", 3600);
defaultPref("media.ffmpeg.vaapi.enabled", true); // Enable VA-API by default
defaultPref("network.buffer.cache.count", 128);
defaultPref("network.buffer.cache.size", 262144);
defaultPref("network.dnsCacheEntries", 1000);
defaultPref("network.dnsCacheExpiration", 3600);
defaultPref("network.dnsCacheExpirationGracePeriod", 240);
defaultPref("network.http.max-connections", 1800);
defaultPref("network.http.max-persistent-connections-per-proxy", 48);
defaultPref("network.http.max-persistent-connections-per-server", 10);
defaultPref("network.http.max-urgent-start-excessive-connections-per-host", 5);
defaultPref("media.memory_cache_max_size", 65536);

// 029 SMOOTH SCROLLING

defaultPref("general.smoothScroll", true);
defaultPref("general.smoothScroll.currentVelocityWeighting", "1");
defaultPref("general.smoothScroll.msdPhysics.continuousMotionMaxDeltaMS", 12);
defaultPref("general.smoothScroll.msdPhysics.enabled", true);
defaultPref("general.smoothScroll.msdPhysics.motionBeginSpringConstant", 600);
defaultPref("general.smoothScroll.msdPhysics.regularSpringConstant", 650);
defaultPref("general.smoothScroll.msdPhysics.slowdownMinDeltaMS", 25);
defaultPref("general.smoothScroll.msdPhysics.slowdownMinDeltaRatio", "2");
defaultPref("general.smoothScroll.msdPhysics.slowdownSpringConstant", 250);
defaultPref("general.smoothScroll.stopDecelerationWeighting", "1");
defaultPref("mousewheel.default.delta_multiplier_y", 300);

// Personal Touch ðŸ’œ

/// Things that are  nice to haveâ„¢

defaultPref("browser.bookmarks.autoExportHTML", true);
defaultPref("browser.bookmarks.openInTabClosesMenu", false);
defaultPref("browser.compactmode.show", true);
defaultPref("browser.mailto.dualPrompt", false); // Prevent prompting to use as mailto handler
defaultPref("browser.mailto.prompt.os", false); // Prevent prompting to use as mailto handlerreduced
defaultPref("browser.menu.showViewImageInfo", true);
defaultPref("browser.newtabpage.activity-stream.feeds.places", false);
defaultPref("browser.newtabpage.activity-stream.discoverystream.recentSaves.enabled", false);
defaultPref("browser.newtabpage.activity-stream.improvesearch.handoffToAwesomebar", false);
defaultPref("browser.newtabpage.activity-stream.newtabWallpapers.enabled", true);
defaultPref("browser.newtabpage.activity-stream.newtabWallpapers.v2.enabled", true);
defaultPref("browser.newtabpage.activity-stream.feeds.section.highlights", false);
defaultPref("browser.newtabpage.activity-stream.section.highlights.includeBookmarks", false);
defaultPref("browser.newtabpage.activity-stream.section.highlights.includeDownloads", false);
defaultPref("browser.newtabpage.activity-stream.section.highlights.includeVisited", false);
defaultPref("browser.newtabpage.activity-stream.section.highlights.rows", 0);
defaultPref("browser.newtabpage.activity-stream.showRecentSaves", false);
defaultPref("browser.preferences.experimental", true);
defaultPref("browser.privateWindowSeparation.enabled", false);
defaultPref("browser.search.openintab", true);
defaultPref("browser.spin_cursor_while_busy", true);
defaultPref("browser.tabs.loadBookmarksInTabs", true);
defaultPref("browser.tabs.tabmanager.enabled", false);
defaultPref("browser.translations.alwaysTranslateLanguages", "fr,de,bg,ca,nl,et,fi,el,hu,it,pl,ru,pt,sl,es,tr,uk");
defaultPref("browser.translations.automaticallyPopup", true); // [DEFAULT]
defaultPref("browser.translations.enable", true); // [DEFAULT]
defaultPref("browser.translations.newSettingsUI.enable", true);
defaultPref("browser.translations.select.enable", true); // [DEFAULT]
defaultPref("browser.urlbar.openintab", true);
defaultPref("devtools.debugger.ui.editor-wrapping", true);
defaultPref("findbar.highlightAll", true);
defaultPref("full-screen-api.transition-duration.enter", "0 0");
defaultPref("full-screen-api.transition-duration.leave", "0 0");
defaultPref("full-screen-api.warning.delay", -1);
defaultPref("full-screen-api.warning.timeout", 0);
defaultPref("security.xfocsp.hideOpenInNewWindow", false);
defaultPref("toolkit.legacyUserProfileCustomizations.stylesheets", true);
defaultPref("view_source.wrap_long_lines", true);

// Misc.

lockPref("identity.fxaccounts.migrateToDevEdition", false);
defaultPref("media.gmp-gmpopenh264.enabled", false);
lockPref("permissions.default.shortcuts", 2);
lockPref("screenshots.browser.component.enabled", false);
lockPref("services.sync.engine.creditcards", false);
lockPref("services.sync.engine.creditcards.available", false);
lockPref("services.sync.engine.passwords", false);

// Dev stuff :p 

defaultPref("devtools.chrome.enabled", true);
defaultPref("devtools.command-button-measure.enabled", true);
defaultPref("devtools.command-button-rulers.enabled", true);
defaultPref("devtools.command-button-screenshot.enabled", true);
defaultPref("devtools.dom.enabled", true);

// DO NOT TOUCH

lockPref("beacon.enabled", true); // [DEFAULT] - Useless & fingerprintable, the websites can get the data from this API anyways...
lockPref("dom.webaudio.enabled", true); // [DEFAULT] - Useless & does more harm than good, covered by FPP/RFP
lockPref("dom.webnotifications.enabled", true); // [DEFAULT] - Notifications are locked behind a permission prompt (Which we block anyways), unnecessary & fingerprintable
lockPref("geo.enabled", true); // [DEFAULT] - Geolocation is locked behind a permission prompt (Which we block anyways), unnecessary & fingerprintable
lockPref("media.navigator.enabled", true); // [DEFAULT] - Useless & does more harm than good, covered by FPP/RFP
lockPref("media.ondevicechange.enabled", true); // [DEFAULT] - Useless & does more harm than good, covered by FPP/RFP
lockPref("media.peerconnection.enabled", true); // [DEFAULT] - Only necessary to disable on Android, uses mDNS Host Obfuscation on desktop & Private IP is only exposed in trusted scenarios
lockPref("media.video_stats.enabled", true); // [DEFAULT] - Useless & does more harm than good, covered by FPP/RFP
lockPref("media.webspeech.synth.enabled", true); // [DEFAULT] - Useless & does more harm than good, covered by FPP/RFP
lockPref("privacy.firstparty.isolate", false); // [DEFAULT] - Deprecated, covered by TCP/ETP
lockPref("ui.use_standins_for_native_colors", false); // [DEFAULT] - Useless & does more harm than good, covered by FPP/RFP
lockPref("webgl.enable-debug-renderer-info", true); // [DEFAULT] - Useless & does more harm than good, covered by FPP/RFP

// Kill Firefox Sync

lockPref("browser.newtabpage.activity-stream.fxaccounts.endpoint", "");
lockPref("identity.fxaccounts.auth.uri", "");
lockPref("identity.fxaccounts.autoconfig.uri", "");
lockPref("identity.fxaccounts.commands.remoteTabManagement.enabled", false);
lockPref("identity.fxaccounts.enabled", false);
lockPref("identity.fxaccounts.oauth.enabled", false);
lockPref("identity.fxaccounts.pairing.enabled", false);
lockPref("identity.fxaccounts.remote.oauth.uri", "");
lockPref("identity.fxaccounts.remote.pairing.uri", "");
lockPref("identity.fxaccounts.remote.profile.uri", "");
lockPref("identity.fxaccounts.remote.root", "");
lockPref("identity.fxaccounts.toolbar.defaultVisible", false);
lockPref("identity.fxaccounts.toolbar.enabled", false);
lockPref("identity.sync.tokenserver.uri", "");
lockPref("services.sync.declinedEngines", "addons,bookmarks,forms,history,creditcards,passwords,addresses,tabs,prefs");
lockPref("services.sync.engine.addons", false);
lockPref("services.sync.engine.addresses", false);
lockPref("services.sync.engine.bookmarks", false);
lockPref("services.sync.engine.creditcards", false);
lockPref("services.sync.engine.history", false);
lockPref("services.sync.engine.passwords", false);
lockPref("services.sync.engine.prefs", false);
lockPref("services.sync.engine.tabs", false);

// Unfortunately I have to use Discord from time to time, so I put it in a separate Firefox profile exclusively used for it.

// Do not apply these settings on profiles you actually plan to browse on or actively use...

// Goal here is to make the profile as light-weight & minimal as possible. Nothing already in the base profile will be covered here.

// Set Discord as start page

lockPref("browser.startup.homepage", "https://discord.com/channels/@me");
lockPref("browser.startup.page", 1);

lockPref("pdfjs.disabled", true); // Disable built-in PDF Reader

lockPref("reader.parse-on-load.enabled", false); // Disable Reader Mode

lockPref("webgl.disabled", true); // Disable WebGL

lockPref("javascript.options.wasm", false); // Disable WASM

lockPref("privacy.resistFingerprinting", true); // Enable RFP

lockPref("privacy.resistFingerprinting.letterboxing", true); // Enable RFP Letterboxing

lockPref("security.ssl.require_safe_negotiation", true); // Always require safe negotiations, supported by Discord

// Disable Gecko Media Plugins & OpenH264

lockPref("media.gmp-gmpopenh264.enabled", false);
lockPref("media.gmp-gmpopenh264.provider.enabled", false);
lockPref("media.gmp-gmpopenh264.visible", false);
lockPref("media.gmp-manager.url.override", "");
lockPref("media.gmp-manager.url", "");
lockPref("media.gmp-provider.enabled", false);

// Disable WebCompat Reporter

lockPref("extensions.webcompat-reporter.enabled", false);
lockPref("extensions.webcompat-reporter.newIssueEndpoint", "");
lockPref("ui.new-webcompat-reporter.enabled", false);
lockPref("ui.new-webcompat-reporter.send-more-info-link", false);

lockPref("network.http.referer.XOriginPolicy", 2);

lockPref("dom.security.https_only_mode_send_http_background_request", false); // Never send HTTP background requests

/// Always sanitize data

lockPref("privacy.clearHistory.historyFormDataAndDownloads", true);
lockPref("privacy.clearSiteData.historyFormDataAndDownloads", true);
lockPref("privacy.clearOnShutdown.cookies", true);
lockPref("privacy.clearOnShutdown.downloads", true);
lockPref("privacy.clearOnShutdown.history", true);
lockPref("privacy.clearOnShutdown.offlineApps", true);
lockPref("privacy.clearOnShutdown_v2.cookiesAndStorage", true);
lockPref("privacy.clearOnShutdown_v2.historyFormDataAndDownloads", true);

// Remove undesired Mozilla links & connections

lockPref("app.feedback.baseURL", "");
lockPref("app.support.baseURL", "");
lockPref("app.update.url.details", "");
lockPref("browser.geolocation.warning.infoURL", "");

// Kill Geolocation

lockPref("geo.provider.network.url", "");
lockPref("geo.provider.use_corelocation", false);
lockPref("geo.provider.use_geoclue", false);
lockPref("geo.provider.ms-windows-location", false);
lockPref("permissions.default.geo", 2);

// Always block pop-ups

lockPref("dom.disable_open_during_load", true);

// Fully disable browsing history

lockPref("places.history.enabled", false);

// Remove unnecessary URL Bar shortcuts

lockPref("browser.urlbar.shortcuts.bookmarks", false);
lockPref("browser.urlbar.shortcuts.history", false);
lockPref("browser.urlbar.shortcuts.tabs", false);

// Use Compact Mode for a slimmer UI 

lockPref("browser.compactmode.show", true);

// Never back-up/export bookmarks

lockPref("browser.bookmarks.autoExportHTML", false);
lockPref("browser.bookmarks.max_backups", 0);

// Never show image placeholders

lockPref("browser.display.show_image_placeholders", false);

// Never show Bookmarks toolbar & Prevent showing "Other Bookmarks"

lockPref("browser.toolbars.bookmarks.showOtherBookmarks", false);
lockPref("browser.toolbars.bookmarks.visibility", "never");

// Prevent caching previous tabs

lockPref("browser.sessionstore.max_tabs_undo", 0);
lockPref("browser.sessionhistory.max_total_viewers", 0);

// Disable ETP Heuristics

lockPref("privacy.antitracking.enableWebcompat", false);
lockPref("privacy.restrict3rdpartystorage.heuristic.opened_window_after_interaction", false);
lockPref("privacy.restrict3rdpartystorage.heuristic.recently_visited", false);
lockPref("privacy.restrict3rdpartystorage.heuristic.redirect", false);
lockPref("privacy.restrict3rdpartystorage.heuristic.window_open", false);

// Disable Cookie Banner Blocking, no point

lockPref("cookiebanners.bannerClicking.enabled", false);
lockPref("cookiebanners.cookieInjector.enabled", false);
lockPref("cookiebanners.service.enableGlobalRules", false);
lockPref("cookiebanners.service.enableGlobalRules.subFrames", false);
lockPref("cookiebanners.service.mode", 0);
lockPref("cookiebanners.service.mode.privateBrowsing", 0);
lockPref("cookiebanners.ui.desktop.enabled", false);

// Misc. URL Bar Suggestions

lockPref("browser.search.separatePrivateDefault.urlbarResult.enabled", false);
lockPref("browser.urlbar.clipboard.featureGate", false);
lockPref("browser.urlbar.maxHistoricalSearchSuggestions", 0);
lockPref("browser.urlbar.maxRichResults", 0);
lockPref("browser.urlbar.richSuggestions.featureGate", false);
lockPref("browser.urlbar.suggest.calculator", false);
lockPref("browser.urlbar.suggest.clipboard", false);
lockPref("browser.urlbar.suggest.engines", false);
lockPref("browser.urlbar.suggest.history", false);
lockPref("browser.urlbar.suggest.openpage", false);
lockPref("browser.urlbar.suggest.remotetab", false);
lockPref("browser.urlbar.unitConversion.enabled", false);
lockPref("keyword.enabled", false);

// Disable Android Debugging

lockPref("devtools.remote.adb.extensionID", "");
lockPref("devtools.remote.adb.extensionURL", "");

// Never automatically search for text without prompting

lockPref("accessibility.typeaheadfind", false);

// Disable Quarantined Domains (Unnecessary since Discord is only site we use...)

lockPref("extensions.quarantinedDomains.enabled", false);

// Misc. Activity Stream, I just use Tabliss anyways...

lockPref("browser.newtabpage.activity-stream.feeds.places", false);
lockPref("browser.newtabpage.activity-stream.feeds.section.highlights", false);
lockPref("browser.newtabpage.activity-stream.feeds.weatherfeed", false);
lockPref("browser.newtabpage.activity-stream.discoverystream.recentSaves.enabled", false);
lockPref("browser.newtabpage.activity-stream.newtabWallpapers.enabled", false);
lockPref("browser.newtabpage.activity-stream.newtabWallpapers.v2.enabled", false);
lockPref("browser.newtabpage.activity-stream.section.highlights.includeBookmarks", false);
lockPref("browser.newtabpage.activity-stream.section.highlights.includeDownloads", false);
lockPref("browser.newtabpage.activity-stream.section.highlights.includeVisited", false);
lockPref("browser.newtabpage.activity-stream.section.highlights.rows", 0);
lockPref("browser.newtabpage.activity-stream.showRecentSaves", false);
lockPref("browser.newtabpage.activity-stream.showWeather", false);

// Disable Animations

lockPref("toolkit.cosmeticAnimations.enabled", false);

// Disable mailto handling

lockPref("browser.mailto.dualPrompt", false);
lockPref("browser.mailto.prompt.os", false);

// Always handle protocols externally
// https://searchfox.org/mozilla-central/source/browser/app/profile/firefox.js#1226

lockPref("network.protocol-handler.expose-all", false);
lockPref("network.protocol-handler.expose.mailto", false); // [DEFAULT]
lockPref("network.protocol-handler.expose.news", false); // [DEFAULT]
lockPref("network.protocol-handler.expose.nntp", false); // [DEFAULT]
lockPref("network.protocol-handler.expose.snews", false); // [DEFAULT]
lockPref("network.protocol-handler.external-default", true); // [FALSE]
lockPref("network.protocol-handler.external.afp", true);
lockPref("network.protocol-handler.external.data", true);
lockPref("network.protocol-handler.external.disk", true);
lockPref("network.protocol-handler.external.disks", true);
lockPref("network.protocol-handler.external.hcp", true);
lockPref("network.protocol-handler.external.help", true);
lockPref("network.protocol-handler.external.iehistory", true);
lockPref("network.protocol-handler.external.ierss", true);
lockPref("network.protocol-handler.external.ile", true);
lockPref("network.protocol-handler.external.javascript", true);
lockPref("network.protocol-handler.external.le", true);
lockPref("network.protocol-handler.external.mailto", true); // [DEFAULT]
lockPref("network.protocol-handler.external.mk", true);
lockPref("network.protocol-handler.external.moz-icon", true);
lockPref("network.protocol-handler.external.ms-cxh", true);
lockPref("network.protocol-handler.external.ms-cxh-full", true);
lockPref("network.protocol-handler.external.ms-help", true);
lockPref("network.protocol-handler.external.ms-msdt", true);
lockPref("network.protocol-handler.external.news", true); // [DEFAULT]
lockPref("network.protocol-handler.external.nntp", true); // [DEFAULT]
lockPref("network.protocol-handler.external.ps", true);
lockPref("network.protocol-handler.external.res", true);
lockPref("network.protocol-handler.external.search", true);
lockPref("network.protocol-handler.external.search-ms", true);
lockPref("network.protocol-handler.external.shell", true);
lockPref("network.protocol-handler.external.snews", true); // [DEFAULT]
lockPref("network.protocol-handler.external.tps", true);
lockPref("network.protocol-handler.external.ttp", true);
lockPref("network.protocol-handler.external.ttps", true);
lockPref("network.protocol-handler.external.vbscript", true);
lockPref("network.protocol-handler.external.vnd.ms.radio", true);

/// Kill Browser Password Manager

lockPref("browser.contentblocking.report.endpoint_url", "");
lockPref("browser.contentblocking.report.lockwise.enabled", false);
lockPref("browser.contentblocking.report.lockwise.how_it_works.url", "");
lockPref("browser.contentblocking.report.mobile-android.url", "");
lockPref("browser.contentblocking.report.mobile-ios.url", "");
lockPref("browser.contentblocking.report.monitor.enabled", false);
lockPref("browser.contentblocking.report.monitor.home_page_url", "");
lockPref("browser.contentblocking.report.monitor.how_it_works.url", "");
lockPref("browser.contentblocking.report.monitor.preferences_url", "");
lockPref("browser.contentblocking.report.monitor.sign_in_url", "");
lockPref("browser.contentblocking.report.monitor.url", "");
lockPref("extensions.formautofill.addresses.enabled", false);
lockPref("extensions.formautofill.creditCards.enabled", false);
lockPref("pref.privacy.disable_button.view_passwords", true);
lockPref("privacy.cpd.passwords", true);
lockPref("signon.generation.enabled", false);
lockPref("signon.rememberSignons", false);
lockPref("signon.recipes.remoteRecipes.enabled", false);
lockPref("services.passwordSavingEnabled", false);
lockPref("signon.management.page.breach-alerts.enabled", false);
lockPref("signon.management.page.breachAlertUrl", "");
lockPref("signon.management.page.vulnerable-passwords.enabled", false);

/// Adding prefs necessary for Firefox-UI-Fix https://github.com/black7375/Firefox-UI-Fix
/// Pulled from https://raw.githubusercontent.com/black7375/Firefox-UI-Fix/master/user.js

// ** Theme Related Options ****************************************************
// == Theme Distribution Settings ==============================================
// The rows that are located continuously must be changed `true`/`false` explicitly because there is a collision.
// https://github.com/black7375/Firefox-UI-Fix/wiki/Options#important
defaultPref("userChrome.tab.connect_to_window",          true); // Original, Photon
defaultPref("userChrome.tab.color_like_toolbar",         true); // Original, Photon

defaultPref("userChrome.tab.lepton_like_padding",        true); // Original
defaultPref("userChrome.tab.photon_like_padding",       false); // Photon

defaultPref("userChrome.tab.dynamic_separator",          true); // Original, Proton
defaultPref("userChrome.tab.static_separator",          false); // Photon
defaultPref("userChrome.tab.static_separator.selected_accent", false); // Just option
defaultPref("userChrome.tab.bar_separator",             false); // Just option

defaultPref("userChrome.tab.newtab_button_like_tab",     true); // Original
defaultPref("userChrome.tab.newtab_button_smaller",     false); // Photon
defaultPref("userChrome.tab.newtab_button_proton",      false); // Proton

defaultPref("userChrome.icon.panel_full",                true); // Original, Proton
defaultPref("userChrome.icon.panel_photon",             false); // Photon

// Original Only
defaultPref("userChrome.tab.box_shadow",                 true);
defaultPref("userChrome.tab.bottom_rounded_corner",      true);

// Photon Only
defaultPref("userChrome.tab.photon_like_contextline",   false);
defaultPref("userChrome.rounding.square_tab",           false);

// == Theme Compatibility Settings =============================================
// defaultPref("userChrome.compatibility.accent_color",         true); // Firefox v103 Below
// defaultPref("userChrome.compatibility.covered_header_image", true);
// defaultPref("userChrome.compatibility.panel_cutoff",         true);
// defaultPref("userChrome.compatibility.navbar_top_border",    true);
// defaultPref("userChrome.compatibility.dynamic_separator",    true); // Need dynamic_separator

// defaultPref("userChrome.compatibility.os.linux_non_native_titlebar_button", true);
// defaultPref("userChrome.compatibility.os.windows_maximized", true);
// defaultPref("userChrome.compatibility.os.win11",             true);

// == Theme Custom Settings ====================================================
// -- User Chrome --------------------------------------------------------------
// defaultPref("userChrome.theme.private",                       true);
// defaultPref("userChrome.theme.proton_color.dark_blue_accent", true);
// defaultPref("userChrome.theme.monospace",                     true);
// defaultPref("userChrome.theme.transparent.frame",             true);
// defaultPref("userChrome.theme.transparent.menu",              true);
// defaultPref("userChrome.theme.transparent.panel",             true);
// defaultPref("userChrome.theme.non_native_menu",               true); // only for linux

// defaultPref("userChrome.decoration.disable_panel_animate",    true);
// defaultPref("userChrome.decoration.disable_sidebar_animate",  true);
// defaultPref("userChrome.decoration.panel_button_separator",   true);
// defaultPref("userChrome.decoration.panel_arrow",              true);

// defaultPref("userChrome.autohide.tab",                        true);
// defaultPref("userChrome.autohide.tab.opacity",                true);
// defaultPref("userChrome.autohide.tab.blur",                   true);
// defaultPref("userChrome.autohide.tabbar",                     true);
// defaultPref("userChrome.autohide.navbar",                     true);
// defaultPref("userChrome.autohide.bookmarkbar",                true);
// defaultPref("userChrome.autohide.sidebar",                    true);
// defaultPref("userChrome.autohide.fill_urlbar",                true);
// defaultPref("userChrome.autohide.back_button",                true);
// defaultPref("userChrome.autohide.forward_button",             true);
// defaultPref("userChrome.autohide.page_action",                true);
// defaultPref("userChrome.autohide.toolbar_overlap",            true);
// defaultPref("userChrome.autohide.toolbar_overlap.allow_layout_shift", true);

// defaultPref("userChrome.hidden.tab_icon",                     true);
// defaultPref("userChrome.hidden.tab_icon.always",              true);
// defaultPref("userChrome.hidden.tabbar",                       true);
// defaultPref("userChrome.hidden.navbar",                       true);
// defaultPref("userChrome.hidden.private_indicator",            true);
// defaultPref("userChrome.hidden.titlebar_container",           true);
// defaultPref("userChrome.hidden.sidebar_header",               true);
// defaultPref("userChrome.hidden.sidebar_header.vertical_tab_only", true);
// defaultPref("userChrome.hidden.urlbar_iconbox",               true);
// defaultPref("userChrome.hidden.urlbar_iconbox.label_only",    true);
// defaultPref("userChrome.hidden.bookmarkbar_icon",             true);
// defaultPref("userChrome.hidden.bookmarkbar_label",            true);
// defaultPref("userChrome.hidden.disabled_menu",                true);

// defaultPref("userChrome.centered.tab",                        true);
// defaultPref("userChrome.centered.tab.label",                  true);
// defaultPref("userChrome.centered.urlbar",                     true);
// defaultPref("userChrome.centered.bookmarkbar",                true);

// defaultPref("userChrome.counter.tab",                         true);
// defaultPref("userChrome.counter.bookmark_menu",               true);

// defaultPref("userChrome.combined.nav_button",                 true);
// defaultPref("userChrome.combined.nav_button.home_button",     true);
// defaultPref("userChrome.combined.urlbar.nav_button",          true);
// defaultPref("userChrome.combined.urlbar.home_button",         true);
// defaultPref("userChrome.combined.urlbar.reload_button",       true);
// defaultPref("userChrome.combined.sub_button.none_background", true);
// defaultPref("userChrome.combined.sub_button.as_normal",       true);

// defaultPref("userChrome.rounding.square_button",              true);
// defaultPref("userChrome.rounding.square_dialog",              true);
// defaultPref("userChrome.rounding.square_panel",               true);
// defaultPref("userChrome.rounding.square_panelitem",           true);
// defaultPref("userChrome.rounding.square_menupopup",           true);
// defaultPref("userChrome.rounding.square_menuitem",            true);
// defaultPref("userChrome.rounding.square_infobox",             true);
// defaultPref("userChrome.rounding.square_toolbar",             true);
// defaultPref("userChrome.rounding.square_field",               true);
// defaultPref("userChrome.rounding.square_urlView_item",        true);
// defaultPref("userChrome.rounding.square_checklabel",          true);

// defaultPref("userChrome.padding.first_tab",                   true);
// defaultPref("userChrome.padding.first_tab.always",            true);
// defaultPref("userChrome.padding.drag_space",                  true);
// defaultPref("userChrome.padding.drag_space.maximized",        true);

// defaultPref("userChrome.padding.toolbar_button.compact",      true);
// defaultPref("userChrome.padding.menu_compact",                true);
// defaultPref("userChrome.padding.bookmark_menu.compact",       true);
// defaultPref("userChrome.padding.urlView_expanding",           true);
// defaultPref("userChrome.padding.urlView_result",              true);
// defaultPref("userChrome.padding.panel_header",                true);

// defaultPref("userChrome.urlbar.iconbox_with_separator",       true);

// defaultPref("userChrome.urlView.as_commandbar",               true);
// defaultPref("userChrome.urlView.full_width_padding",          true);
// defaultPref("userChrome.urlView.always_show_page_actions",    true);
// defaultPref("userChrome.urlView.move_icon_to_left",           true);
// defaultPref("userChrome.urlView.go_button_when_typing",       true);
// defaultPref("userChrome.urlView.focus_item_border",           true);

// defaultPref("userChrome.tabbar.as_titlebar",                  true);
// defaultPref("userChrome.tabbar.fill_width",                   true);
// defaultPref("userChrome.tabbar.multi_row",                    true);
// defaultPref("userChrome.tabbar.unscroll",                     true);
// defaultPref("userChrome.tabbar.on_bottom",                    true);
// defaultPref("userChrome.tabbar.on_bottom.above_bookmark",     true); // Need on_bottom
// defaultPref("userChrome.tabbar.on_bottom.menubar_on_top",     true); // Need on_bottom
// defaultPref("userChrome.tabbar.on_bottom.hidden_single_tab",  true); // Need on_bottom
// defaultPref("userChrome.tabbar.one_liner",                    true);
// defaultPref("userChrome.tabbar.one_liner.combine_navbar",     true); // Need one_liner
// defaultPref("userChrome.tabbar.one_liner.tabbar_first",       true); // Need one_liner
// defaultPref("userChrome.tabbar.one_liner.responsive",         true); // Need one_liner

// defaultPref("userChrome.tab.bottom_rounded_corner.all",       true);
// defaultPref("userChrome.tab.bottom_rounded_corner.australis", true);
// defaultPref("userChrome.tab.bottom_rounded_corner.edge",      true);
// defaultPref("userChrome.tab.bottom_rounded_corner.chrome",    true);
// defaultPref("userChrome.tab.bottom_rounded_corner.chrome_legacy", true);
// defaultPref("userChrome.tab.bottom_rounded_corner.wave",      true);
// defaultPref("userChrome.tab.always_show_tab_icon",            true);
// defaultPref("userChrome.tab.close_button_at_pinned",          true);
// defaultPref("userChrome.tab.close_button_at_pinned.always",   true);
// defaultPref("userChrome.tab.close_button_at_pinned.background", true);
// defaultPref("userChrome.tab.close_button_at_hover.always",    true); // Need close_button_at_hover
// defaultPref("userChrome.tab.close_button_at_hover.with_selected", true);  // Need close_button_at_hover
// defaultPref("userChrome.tab.sound_show_label",                true); // Need remove sound_hide_label
// defaultPref("userChrome.tab.container.on_top",                true);
// defaultPref("userChrome.tab.container.always_long",           true);
// defaultPref("userChrome.tab.sound_with_favicons.on_center",   true);
// defaultPref("userChrome.tab.selected_bold",                   true);

// defaultPref("userChrome.navbar.as_sidebar",                   true);

// defaultPref("userChrome.bookmarkbar.multi_row",               true);

// defaultPref("userChrome.findbar.floating_on_top",             true);

// defaultPref("userChrome.panel.remove_strip",                  true);
// defaultPref("userChrome.panel.full_width_separator",          true);
// defaultPref("userChrome.panel.full_width_padding",            true);

// defaultPref("userChrome.sidebar.overlap",                     true);

// defaultPref("userChrome.icon.disabled",                       true);
// defaultPref("userChrome.icon.account_image_to_right",         true);
// defaultPref("userChrome.icon.account_label_to_right",         true);
// defaultPref("userChrome.icon.menu.full",                      true);
// defaultPref("userChrome.icon.global_menu.mac",                true);

// -- User Content -------------------------------------------------------------
// defaultPref("userContent.player.ui.twoline",                  true);

// defaultPref("userContent.newTab.hidden_logo",                 true);
// defaultPref("userContent.newTab.background_image",            true); // Need wallpaper image to `userContent.css`. :root { --uc-newTab-wallpaper: url("../icons/background_image.png"); }

// defaultPref("userContent.page.proton_color.dark_blue_accent", true);
// defaultPref("userContent.page.proton_color.system_accent",    true);
// defaultPref("userContent.page.dark_mode.pdf",                 true);
// defaultPref("userContent.page.monospace",                     true);

// == Theme Default Settings ===================================================
// -- User Chrome --------------------------------------------------------------
defaultPref("userChrome.compatibility.theme",       true);
defaultPref("userChrome.compatibility.os",          true);

defaultPref("userChrome.theme.built_in_contrast",   true);
defaultPref("userChrome.theme.system_default",      true);
defaultPref("userChrome.theme.proton_color",        true);
defaultPref("userChrome.theme.proton_chrome",       true); // Need proton_color
defaultPref("userChrome.theme.fully_color",         true); // Need proton_color
defaultPref("userChrome.theme.fully_dark",          true); // Need proton_color

defaultPref("userChrome.decoration.cursor",         true);
defaultPref("userChrome.decoration.field_border",   true);
defaultPref("userChrome.decoration.download_panel", true);
defaultPref("userChrome.decoration.animate",        true);

defaultPref("userChrome.padding.tabbar_width",      true);
defaultPref("userChrome.padding.tabbar_height",     true);
defaultPref("userChrome.padding.toolbar_button",    true);
defaultPref("userChrome.padding.navbar_width",      true);
defaultPref("userChrome.padding.urlbar",            true);
defaultPref("userChrome.padding.bookmarkbar",       true);
defaultPref("userChrome.padding.infobar",           true);
defaultPref("userChrome.padding.menu",              true);
defaultPref("userChrome.padding.bookmark_menu",     true);
defaultPref("userChrome.padding.global_menubar",    true);
defaultPref("userChrome.padding.panel",             true);
defaultPref("userChrome.padding.popup_panel",       true);

defaultPref("userChrome.tab.multi_selected",        true);
defaultPref("userChrome.tab.unloaded",              true);
defaultPref("userChrome.tab.letters_cleary",        true);
defaultPref("userChrome.tab.close_button_at_hover", true);
defaultPref("userChrome.tab.sound_hide_label",      true);
defaultPref("userChrome.tab.sound_with_favicons",   true);
defaultPref("userChrome.tab.pip",                   true);
defaultPref("userChrome.tab.container",             true);
defaultPref("userChrome.tab.crashed",               true);

defaultPref("userChrome.fullscreen.overlap",        true);
defaultPref("userChrome.fullscreen.show_bookmarkbar", true);

defaultPref("userChrome.icon.library",              true);
defaultPref("userChrome.icon.panel",                true);
defaultPref("userChrome.icon.menu",                 true);
defaultPref("userChrome.icon.context_menu",         true);
defaultPref("userChrome.icon.global_menu",          true);
defaultPref("userChrome.icon.global_menubar",       true);
defaultPref("userChrome.icon.1-25px_stroke",        true);

// -- User Content -------------------------------------------------------------
defaultPref("userContent.player.ui",             true);
defaultPref("userContent.player.icon",           true);
defaultPref("userContent.player.noaudio",        true);
defaultPref("userContent.player.size",           true);
defaultPref("userContent.player.click_to_play",  true);
defaultPref("userContent.player.animate",        true);

defaultPref("userContent.newTab.full_icon",      true);
defaultPref("userContent.newTab.animate",        true);
defaultPref("userContent.newTab.pocket_to_last", true);
defaultPref("userContent.newTab.searchbar",      true);

defaultPref("userContent.page.field_border",     true);
defaultPref("userContent.page.illustration",     true);
defaultPref("userContent.page.proton_color",     true);
defaultPref("userContent.page.dark_mode",        true); // Need proton_color
defaultPref("userContent.page.proton",           true); // Need proton_color