// My base Firefox Mozilla.cfg :)

// The Phoenix shall rise from the ashes of what fell before it.

// Covers prefs not specifically handled by enterprise policies, makes more sense to have all here since easier to document and policies do not support all prefs anyway...

lockPref("general.config.filename", "mozilla.cfg"); 

defaultPref("browser.aboutConfig.showWarning", false);
defaultPref("general.warnOnAboutConfig", false);

// 001 DATA COLLECTION

// A lot of defense in depth...

/// Shield Studies/Normandy
// We also set "DisableFirefoxStudies" in policies 
// https://mozilla.github.io/policy-templates/#disablefirefoxstudies
// https://mozilla.github.io/normandy/
// https://wiki.mozilla.org/Firefox/Shield/Shield_Studies
// https://support.mozilla.org/kb/shield
// https://support.mozilla.org/kb/how-stop-firefox-making-automatic-connections#w_experiments-or-studies
// https://wiki.mozilla.org/Advocacy/heartbeat

lockPref("app.normandy.api_url", "");
lockPref("app.normandy.enabled", false);
lockPref("app.normandy.first_run", false);
lockPref("app.normandy.user_id", "");
lockPref("app.shield.optoutstudies.enabled", false);
lockPref("messaging-system.rsexperimentloader.enabled", false);
lockPref("messaging-system.rsexperimentloader.collection_id", "");
lockPref("signon.recipes.remoteRecipes.enabled", false); // https://bugzilla.mozilla.org/show_bug.cgi?id=1119454
lockPref("toolkit.telemetry.pioneer-new-studies-available", false);

/// WebVTT Testing Events
// https://searchfox.org/mozilla-central/source/modules/libpref/init/StaticPrefList.yaml

lockPref("media.webvtt.testing.events", false);

/// Origin Trials
// https://wiki.mozilla.org/Origin_Trials

lockPref("dom.origin-trials.enabled", false);

/// Crash Reporting
// https://github.com/mozilla-services/socorro
// https://wiki.mozilla.org/Socorro

lockPref("breakpad.reportURL", "");
lockPref("browser.crashReports.unsubmittedCheck.autoSubmit2", false); // [DEFAULT]
lockPref("browser.crashReports.unsubmittedCheck.enabled", false); // [DEFAULT]
lockPref("browser.tabs.crashReporting.includeURL", false); // Defense in depth
lockPref("browser.tabs.crashReporting.sendReport", false);

/// X-Frame Options Error Reporting
// https://firefox-source-docs.mozilla.org/toolkit/components/telemetry/data/xfocsp-error-report-ping.html

lockPref("security.xfocsp.errorReporting.automatic", false); // [DEFAULT]
lockPref("security.xfocsp.errorReporting.enabled", false);

/// SSL Error Reporting 
// https://mozilla.github.io/policy-templates/#preferences

lockPref("security.ssl.errorReporting.enabled", false);

/// Coverage
// https://blog.mozilla.org/data/2018/08/20/effectively-measuring-search-in-firefox/

lockPref("toolkit.coverage.enabled", false);
lockPref("toolkit.coverage.endpoint.base", "http://localhost"); // https://searchfox.org/mozilla-central/source/testing/profiles/common/user.js
lockPref("toolkit.coverage.opt-out", true); // [HIDDEN]
lockPref("toolkit.telemetry.coverage.opt-out", true); // [HIDDEN]

/// Misc. Telemetry
// We also set "DisableTelemetry", "ImproveSuggest", & "DisableDefaultBrowserAgent" in policies 
// https://mozilla.github.io/policy-templates/#disabletelemetry 
// https://mozilla.github.io/policy-templates/#firefoxsuggest
// https://mozilla.github.io/policy-templates/#disabledefaultbrowseragent
// https://searchfox.org/mozilla-central/source/testing/geckodriver/src/prefs.rs
// https://wiki.mozilla.org/QA/Telemetry
// https://firefox-source-docs.mozilla.org/toolkit/components/telemetry/internals/preferences.html 
// https://searchfox.org/mozilla-central/source/modules/libpref/init/StaticPrefList.yaml

lockPref("browser.newtabpage.activity-stream.feeds.telemetry", false);
lockPref("browser.newtabpage.activity-stream.impressionId", "");
lockPref("browser.newtabpage.activity-stream.telemetry", false);
lockPref("browser.newtabpage.activity-stream.telemetry.structuredIngestion.endpoint", "");
lockPref("browser.newtabpage.activity-stream.telemetry.ut.events", false);
lockPref("browser.places.interactions.enabled", false); // https://searchfox.org/mozilla-central/source/browser/app/profile/firefox.js
lockPref("browser.privacySegmentation.preferences.show", false);
lockPref("browser.rights.3.shown", true);
lockPref("browser.search.serpEventTelemetryCategorization.enabled", false);
lockPref("browser.search.serpMetricsRecordedCounter", 0);
lockPref("browser.urlbar.quicksuggest.dataCollection.enabled", false);
lockPref("corroborator.enabled", false);
lockPref("datareporting.healthreport.documentServerURI", "http://%(server)s/dummy/healthreport/"); // [HIDDEN]
lockPref("datareporting.healthreport.logging.consoleEnabled", false); // [HIDDEN]
lockPref("datareporting.healthreport.service.enabled", false); // [HIDDEN]
lockPref("datareporting.healthreport.service.firstRun", false); // [HIDDEN]
lockPref("datareporting.healthreport.uploadEnabled", false);
lockPref("datareporting.policy.dataSubmissionEnabled", false);
lockPref("datareporting.policy.dataSubmissionPolicyBypassNotification", true);
lockPref("datareporting.policy.firstRunURL", "");
lockPref("default-browser-agent.enabled", false);
lockPref("dom.ipc.processHangMonitor", false);
lockPref("dom.ipc.reportProcessHangs", false);
lockPref("dom.security.unexpected_system_load_telemetry_enabled", false);
lockPref("hangmonitor.timeout", 0);
lockPref("network.jar.record_failure_reason", false);
lockPref("network.traffic_analyzer.enabled", false);
lockPref("network.trr.confirmation_telemetry_enabled", false);
lockPref("identity.fxaccounts.telemetry.clientAssociationPing.enabled", false);
lockPref("identity.fxaccounts.account.telemetry.sanitized_uid", "");
lockPref("privacy.trackingprotection.emailtracking.data_collection.enabled", false);
lockPref("security.app_menu.recordEventTelemetry", false);
lockPref("security.certerrors.recordEventTelemetry", false);
lockPref("security.protectionspopup.recordEventTelemetry", false);
lockPref("toolkit.content-background-hang-monitor.disabled", true);
lockPref("toolkit.telemetry.archive.enabled", false);
lockPref("toolkit.telemetry.bhrPing.enabled", false);
lockPref("toolkit.telemetry.cachedClientID", "");
lockPref("toolkit.telemetry.dap_enabled", false);
lockPref("toolkit.telemetry.dap_helper", "");
lockPref("toolkit.telemetry.dap_helper_owner", "");
lockPref("toolkit.telemetry.dap_leader", "");
lockPref("toolkit.telemetry.dap_leader_owner", "");
lockPref("toolkit.telemetry.dap_task1_enabled", false);
lockPref("toolkit.telemetry.dap_task1_taskid", "");
lockPref("toolkit.telemetry.dap_visit_counting_enabled", false);
lockPref("toolkit.telemetry.dap_visit_counting_experiment_list", "[]");
lockPref("toolkit.telemetry.debugSlowSql", false);
lockPref("toolkit.telemetry.enabled", false);
lockPref("toolkit.telemetry.firstShutdownPing.enabled", false);
lockPref("toolkit.telemetry.healthping.enabled", false);
lockPref("toolkit.telemetry.newProfilePing.enabled", false);
lockPref("toolkit.telemetry.pioneerId", ""); // [HIDDEN]
lockPref("toolkit.telemetry.previousBuildID", "");
lockPref("toolkit.telemetry.server", "data;");
lockPref("toolkit.telemetry.server_owner", "");
lockPref("toolkit.telemetry.shutdownPingSender.enabled", false);
lockPref("toolkit.telemetry.shutdownPingSender.enabledFirstSession", false);
lockPref("toolkit.telemetry.shutdownPingSender.backgroundtask.enabled", false);
lockPref("toolkit.telemetry.unified", false);
lockPref("toolkit.telemetry.updatePing.enabled", false);
lockPref("toolkit.telemetry.user_characteristics_ping.opt-out", true);
lockPref("toolkit.telemetry.user_characteristics_ping.send-once", false);
lockPref("toolkit.telemetry.user_characteristics_ping.uuid", "");

/// Misc. UX - Harmless but does not apply to us

lockPref("app.normandy.shieldLearnMoreUrl", "");
lockPref("datareporting.healthreport.infoURL", "");
lockPref("toolkit.crashreporter.infoURL", "");
lockPref("toolkit.datacollection.infoURL", "");

// 002 MOZILLA CRAPâ„¢

/// Firefox Recommendations & "Discovery"
// We also set "ExtensionRecommendations" & "FeatureRecommendations" in policies
// https://mozilla.github.io/policy-templates/#usermessaging
// https://support.mozilla.org/kb/recommendations-firefox
// https://support.mozilla.org/kb/personalized-extension-recommendations

lockPref("browser.dataFeatureRecommendations.enabled", false);
lockPref("browser.discovery.enabled", false);
lockPref("browser.discovery.sites", "");
lockPref("browser.newtabpage.activity-stream.asrouter.userprefs.cfr.addons", false);
lockPref("browser.newtabpage.activity-stream.asrouter.userprefs.cfr.features", false);
lockPref("extensions.getAddons.browseAddons", ""); // Android
lockPref("extensions.getAddons.discovery.api_url", "data:;base64,eyJyZXN1bHRzIjpbXX0%3D"); // https://searchfox.org/mozilla-central/source/testing/profiles/common/user.js
lockPref("extensions.getAddons.showPane", false);
lockPref("extensions.htmlaboutaddons.discover.enabled", false);
lockPref("extensions.htmlaboutaddons.recommendations.enabled", false);
lockPref("extensions.recommendations.themeRecommendationUrl", "");
lockPref("extensions.webservice.discoverURL", "");

/// Fakespot

lockPref("browser.shopping.experience2023.ads.enabled", false);
lockPref("browser.shopping.experience2023.ads.exposure", false);
lockPref("browser.shopping.experience2023.ads.userEnabled", false);
lockPref("browser.shopping.experience2023.active", false);
lockPref("browser.shopping.experience2023.autoOpen.enabled", false);
lockPref("browser.shopping.experience2023.autoOpen.userEnabled", false);
lockPref("browser.shopping.experience2023.enabled", false);
lockPref("browser.shopping.experience2023.optedIn", 2);
lockPref("browser.shopping.experience2023.survey.enabled", false);
lockPref("browser.urlbar.fakespot.featureGate", false);
lockPref("browser.urlbar.suggest.fakespot", false);
lockPref("toolkit.shopping.ohttpConfigURL", "");
lockPref("toolkit.shopping.ohttpRelayURL", "");

/// Pocket
// We also set "DisablePocket", "Pocket", & "SponsoredPocket" in policies 
// https://mozilla.github.io/policy-templates/#disablepocket
// https://mozilla.github.io/policy-templates/#firefoxhome

lockPref("browser.newtabpage.activity-stream.discoverystream.pocket-feed-parameters", "");
lockPref("browser.newtabpage.activity-stream.discoverystream.saveToPocketCard.enabled", false);
lockPref("browser.newtabpage.activity-stream.discoverystream.sendToPocket.enabled", false);
lockPref("browser.newtabpage.activity-stream.feeds.section.topstories", false);
lockPref("browser.urlbar.pocket.featureGate", false);
lockPref("browser.urlbar.suggest.pocket", false);
lockPref("browser.newtabpage.activity-stream.section.highlights.includePocket", false);
lockPref("extensions.pocket.api", "");
lockPref("extensions.pocket.bffApi", "");
lockPref("extensions.pocket.bffRecentSaves", false);
lockPref("extensions.pocket.enabled", false);
lockPref("extensions.pocket.oAuthConsumerKey", "");
lockPref("extensions.pocket.oAuthConsumerKeyBff", "");
lockPref("extensions.pocket.refresh.emailButton.enabled", false);
lockPref("extensions.pocket.refresh.hideRecentSaves.enabled", true);
lockPref("extensions.pocket.showHome", false);
lockPref("extensions.pocket.site", "");

/// Firefox Relay

lockPref("signon.firefoxRelay.base_url", "");
lockPref("signon.firefoxRelay.feature", "disabled");
lockPref("signon.firefoxRelay.manage_url", "");

/// "Interest-based Content Relevance Ranking"
// https://bugzilla.mozilla.org/show_bug.cgi?id=1886207

lockPref("toolkit.contentRelevancy.enabled", false);
lockPref("toolkit.contentRelevancy.ingestEnabled", false);

/// "Top Sites"
// We also set "TopSites" & "SponsoredTopSites" in policies 
// https://mozilla.github.io/policy-templates/#firefoxhome

lockPref("browser.newtabpage.activity-stream.default.sites", "");
lockPref("browser.newtabpage.activity-stream.discoverystream.spocTopsitesPlacement.enabled", false);
lockPref("browser.newtabpage.activity-stream.showSponsoredTopSites", false);
lockPref("browser.newtabpage.activity-stream.feeds.system.topsites", false);
lockPref("browser.newtabpage.activity-stream.feeds.topsites", false);
lockPref("browser.newtabpage.activity-stream.improvesearch.noDefaultSearchTile", true); // [DEFAULT]
lockPref("browser.newtabpage.activity-stream.improvesearch.topSiteSearchShortcuts", false);
lockPref("browser.newtabpage.activity-stream.improvesearch.topSiteSearchShortcuts.havePinned", "");
lockPref("browser.newtabpage.activity-stream.improvesearch.topSiteSearchShortcuts.searchEngines", "");
lockPref("browser.newtabpage.pinned", "");
lockPref("browser.partnerlink.attributionURL", "");
lockPref("browser.partnerlink.campaign.topsites", "");
lockPref("browser.topsites.component.enabled", false);
lockPref("browser.topsites.contile.cachedTiles", "");
lockPref("browser.topsites.contile.enabled", false); // Make sure still active
lockPref("browser.topsites.contile.endpoint", "");
lockPref("browser.topsites.useRemoteSetting", false);
lockPref("browser.urlbar.sponsoredTopSites", false);
lockPref("browser.urlbar.suggest.topsites", false);

/// Misc. Activity Stream (about:home)
// We also configure "FirefoxHome" in policies
// https://mozilla.github.io/policy-templates/#firefoxhome
// https://searchfox.org/mozilla-central/source/testing/geckodriver/src/prefs.rs

lockPref("browser.newtabpage.activity-stream.asrouter.providers.cfr", "null");
lockPref("browser.newtabpage.activity-stream.asrouter.providers.cfr-fxa", "null");
lockPref("browser.newtabpage.activity-stream.asrouter.providers.message-groups", "null");
lockPref("browser.newtabpage.activity-stream.asrouter.providers.messaging-experiments", "null");
lockPref("browser.newtabpage.activity-stream.asrouter.providers.onboarding", "null");
lockPref("browser.newtabpage.activity-stream.asrouter.providers.snippets", "null");
lockPref("browser.newtabpage.activity-stream.asrouter.useRemoteL10n", false);
lockPref("browser.newtabpage.activity-stream.discoverystream.config", "[]");
lockPref("browser.newtabpage.activity-stream.discoverystream.enabled", false);
lockPref("browser.newtabpage.activity-stream.discoverystream.endpointSpocsClear", "");
lockPref("browser.newtabpage.activity-stream.discoverystream.essentialReadsHeader.enabled", false);
lockPref("browser.newtabpage.activity-stream.discoverystream.newSponsoredLabel.enabled", false);
lockPref("browser.newtabpage.activity-stream.discoverystream.onboardingExperience.dismissed", true);
lockPref("browser.newtabpage.activity-stream.discoverystream.onboardingExperience.enabled", false);
lockPref("browser.newtabpage.activity-stream.discoverystream.personalization.enabled", false);
lockPref("browser.newtabpage.activity-stream.discoverystream.recs.personalized", false);
lockPref("browser.newtabpage.activity-stream.discoverystream.spocs.personalized", false);
lockPref("browser.newtabpage.activity-stream.discoverystream.spocs-endpoint", "");
lockPref("browser.newtabpage.activity-stream.discoverystream.spocs-endpoint-query", "");
lockPref("browser.newtabpage.activity-stream.discoverystream.sponsored-collections.enabled", false);
lockPref("browser.newtabpage.activity-stream.discoverystream.topicSelection.enabled", false);
lockPref("browser.newtabpage.activity-stream.feeds.asrouterfeed", false);
lockPref("browser.newtabpage.activity-stream.feeds.discoverystreamfeed", false);
lockPref("browser.newtabpage.activity-stream.feeds.recommendationprovider", false);
lockPref("browser.newtabpage.activity-stream.feeds.section.topstories.options", "{\"hidden\":true}");
lockPref("browser.newtabpage.activity-stream.feeds.snippets", false);
lockPref("browser.newtabpage.activity-stream.showSponsored", false);
lockPref("browser.newtabpage.activity-stream.system.showSponsored", false);
lockPref("browser.newtabpage.activity-stream.tippyTop.service.endpoint", "");
lockPref("browser.library.activity-stream.enabled", false);
lockPref("browser.snippets.enabled", false);
lockPref("browser.snippets.firstrunHomepage.enabled", false);
lockPref("browser.snippets.syncPromo.enabled", false);
lockPref("browser.snippets.updateUrl", "");
lockPref("messaging-system.askForFeedback", false);

/// Firefox Suggest
// We also configure "FirefoxSuggest" & "UrlbarInterventions" in policies
// https://mozilla.github.io/policy-templates/#firefoxsuggest
// https://mozilla.github.io/policy-templates/#usermessaging
// https://mozilla-services.github.io/merino/firefox.html
// https://github.com/mozilla-services/merino-py

lockPref("browser.newtabpage.activity-stream.discoverystream.merino-feed-experiment", false);
lockPref("browser.newtabpage.activity-stream.discoverystream.merino-provider.enabled", false);
lockPref("browser.newtabpage.activity-stream.discoverystream.merino-provider.endpoint", "");
lockPref("browser.urlbar.addons.featureGate", false);
lockPref("browser.urlbar.groupLabels.enabled", false);
lockPref("browser.urlbar.mdn.featureGate", false);
lockPref("browser.urlbar.merino.endpointURL", "");
lockPref("browser.urlbar.merino.providers", "");
lockPref("browser.urlbar.quicksuggest.contextualOptIn", false);
lockPref("browser.urlbar.quicksuggest.enabled", false);
lockPref("browser.urlbar.quicksuggest.scenario", "offline");
lockPref("browser.urlbar.quicksuggest.shouldShowOnboardingDialog", false);
lockPref("browser.urlbar.suggest.addons", false);
lockPref("browser.urlbar.suggest.mdn", false);
lockPref("browser.urlbar.suggest.quicksuggest.nonsponsored", false);
lockPref("browser.urlbar.suggest.quicksuggest.sponsored", false);
lockPref("browser.urlbar.suggest.trending", false);
lockPref("browser.urlbar.suggest.weather", false);
lockPref("browser.urlbar.suggest.yelp", false);
lockPref("browser.urlbar.trending.featureGate", false);
lockPref("browser.urlbar.weather.featureGate", false);
lockPref("browser.urlbar.yelp.featureGate", false);

/// Mozilla Push & Web Notifications
/// I have yet to see a legitimate use-case for websites using push notifications... but I have very commonly seen it abused for malicious purposes & spam
/// We also set "Notifications" in policies
// https://mozilla.github.io/policy-templates/#permissions
// https://mozilla-push-service.readthedocs.io/en/latest/
// https://mozilla-services.github.io/autopush-rs/

lockPref("dom.push.enabled", true); // [DEFAULT] - Fingerprintable & unnecessary with prefs below
lockPref("dom.push.connection.enabled", false);
lockPref("dom.push.serverURL", "");
lockPref("dom.push.userAgentID", "");
lockPref("permissions.default.desktop-notification", 2);

/// Disable fetching AMO Metadata, used for recommendations & details, unnecessary
// https://support.mozilla.org/kb/how-stop-firefox-making-automatic-connections#w_add-on-metadata-updating

lockPref("extensions.getAddons.cache.enabled", false);

/// Misc. Promotions
// We also set "MoreFromMozilla" in policies
// https://mozilla.github.io/policy-templates/#usermessaging

lockPref("browser.contentblocking.report.hide_vpn_banner", true);
lockPref("browser.contentblocking.report.show_mobile_app", false);
lockPref("browser.contentblocking.report.vpn.url", "");
lockPref("browser.contentblocking.report.vpn-android.url", "");
lockPref("browser.contentblocking.report.vpn-ios.url", "");
lockPref("browser.contentblocking.report.vpn-promo.url", "");
lockPref("browser.newtabpage.activity-stream.newtabWallpapers.highlightDismissed", true);
lockPref("browser.newtabpage.activity-stream.newtabWallpapers.highlightEnabled", false);
lockPref("browser.preferences.moreFromMozilla", false);
lockPref("browser.privatebrowsing.vpnpromourl", "");
lockPref("browser.promo.cookiebanners.enabled", false);
lockPref("browser.promo.focus.enabled", false);
lockPref("browser.promo.pin.enabled", false);
lockPref("browser.protections_panel.infoMessage.seen", true); // Disables ETP Banner
lockPref("browser.vpn_promo.enabled", false);
lockPref("cookiebanners.ui.desktop.showCallout", false);
lockPref("identity.fxaccounts.toolbar.pxiToolbarEnabled", false);
lockPref("identity.fxaccounts.toolbar.pxiToolbarEnabled.monitorEnabled", false);
lockPref("identity.fxaccounts.toolbar.pxiToolbarEnabled.relayEnabled", false);
lockPref("identity.fxaccounts.toolbar.pxiToolbarEnabled.vpnEnabled", false);
lockPref("identity.mobilepromo.android", "");
lockPref("identity.mobilepromo.ios", "");
lockPref("identity.sendtabpromo.url", "");

/// Kill about:welcome & Onboarding
/// We also set "OverrideFirstRunPage", "OverridePostUpdatePage", & "SkipOnboarding" in policies
// https://mozilla.github.io/policy-templates/#overridefirstrunpage
// https://mozilla.github.io/policy-templates/#overridepostupdatepage
// https://mozilla.github.io/policy-templates/#usermessaging

lockPref("browser.aboutwelcome.enabled", false);
lockPref("browser.aboutwelcome.screens", "");
lockPref("browser.aboutwelcome.showModal", false);
lockPref("browser.migrate.content-modal.about-welcome-behavior", "autoclose");
lockPref("browser.startup.homepage_override.mstone", "ignore");
lockPref("browser.suppress_first_window_animation", true);
lockPref("browser.usedOnWindows10.introURL", ""); // https://searchfox.org/mozilla-central/source/remote/shared/RecommendedPreferences.sys.mjs
lockPref("startup.homepage_override_url", "");
lockPref("startup.homepage_override_url_nimbus", "");
lockPref("startup.homepage_welcome_url", "");
lockPref("startup.homepage_welcome_url.additional", "");

/// Kill UI Tour & Misc. "Feature Tours"

lockPref("browser.firefox-view.feature-tour", "{\"screen\":\"\",\"complete\":true}");
lockPref("browser.pdfjs.feature-tour",  "{\"screen\":\"\",\"complete\":true}");
lockPref("browser.uitour.enabled", false);
lockPref("browser.uitour.surveyDuration", 0);
lockPref("browser.uitour.url", "");

/// Prevent Mozilla domains from having special privileges

lockPref("browser.tabs.remote.separatePrivilegedMozillaWebContentProcess", false);
lockPref("browser.tabs.remote.separatedMozillaDomains", "");
lockPref("dom.ipc.processCount.privilegedmozilla", 0);
defaultPref("extensions.webextensions.restrictedDomains", "");
lockPref("permissions.manager.defaultsUrl", "");
lockPref("privacy.resistFingerprinting.block_mozAddonManager", true);
lockPref("svg.context-properties.content.allowed-domains", "");
lockPref("webchannel.allowObject.urlWhitelist", "");

/// Remove Mozilla URL tracking params

lockPref("app.releaseNotesURL", "https://www.mozilla.org/%LOCALE%/firefox/%VERSION%/releasenotes");
lockPref("app.releaseNotesURL.aboutDialog", "https://www.mozilla.org/%LOCALE%/firefox/%VERSION%/releasenotes");
lockPref("app.releaseNotesURL.prompt", "https://www.mozilla.org/%LOCALE%/firefox/%VERSION%/releasenotes");
lockPref("extensions.recommendations.privacyPolicyUrl","https://www.mozilla.org/privacy/firefox/#addons");

/// Firefox View

defaultPref("browser.firefox-view.search.enabled", false);
defaultPref("browser.firefox-view.virtual-list.enabled", false);
defaultPref("browser.tabs.firefox-view-newIcon", false);
defaultPref("browser.tabs.firefox-view-next", false);

// 003 Search & URL Bar

/// Prevent search engines from remotely updating
// https://firefox-source-docs.mozilla.org/toolkit/search/Preferences.html#hidden

lockPref("browser.search.update", false);

/// Allow adding custom search engines in about:preferences#search

defaultPref("browser.urlbar.update2.engineAliasRefresh", true);

/// Never trim URLs

lockPref("browser.urlbar.trimHttps", false);
lockPref("browser.urlbar.trimURLs", false);

/// Allow using a different search engine in Private Windows vs. Normal Windows

defaultPref("browser.search.separatePrivateDefault.ui.enabled", true);

// Prompt to use Private Browsing

defaultPref("browser.search.separatePrivateDefault.urlbarResult.enabled", true);

// Remove Search Engine Placeholders

lockPref("browser.urlbar.placeholderName", "");
lockPref("browser.urlbar.placeholderName.private", "");

/// Always show Punycode - Helps prevent phishing & IDN Homograph Attacks
// https://en.wikipedia.org/wiki/IDN_homograph_attack

lockPref("network.IDN_show_punycode", true);

/// Never autofill/autocomplete URLs

lockPref("browser.urlbar.autoFill", false);

// Always show URL instead of search terms

lockPref("browser.urlbar.showSearchTerms.enabled", false);
lockPref("browser.urlbar.showSearchTerms.featureGate", false);

/// Enforce that JavaScript URLS are excluded from results

lockPref("browser.urlbar.filter.javascript", true); // [DEFAULT]

/// Disable "Recent Searches" being suggested since we disable Search & Form History anyways

lockPref("browser.urlbar.recentsearches.featureGate", false); 
lockPref("browser.urlbar.suggest.recentsearches", false);

// Nice to have

defaultPref("browser.urlbar.clipboard.featureGate", false);
defaultPref("browser.urlbar.suggest.bookmark", true);
defaultPref("browser.urlbar.suggest.calculator", true);
defaultPref("browser.urlbar.suggest.clipboard", false);
defaultPref("browser.urlbar.suggest.history", false);
defaultPref("browser.urlbar.suggest.openpage", true);
defaultPref("browser.urlbar.unitConversion.enabled", true);

// 004 Implicit Connections

/// Disable Network Prefetching
// We also set "NetworkPrediction" in policies
// https://mozilla.github.io/policy-templates/#networkprediction
// https://developer.mozilla.org/docs/Glossary/Prefetch

lockPref("browser.places.speculativeConnect.enabled", false);
lockPref("browser.urlbar.speculativeConnect.enabled", false);
lockPref("network.dns.disablePrefetch", true);
lockPref("network.dns.disablePrefetchFromHTTPS", true); // [DEFAULT]
lockPref("network.http.speculative-parallel-limit", 0);
lockPref("network.predictor.enable-prefetch", false); // [DEFAULT]
lockPref("network.predictor.enabled", false);
lockPref("network.prefetch-next", false);

/// Disable Search Suggestions
/// We also set "SearchSuggestEnabled" in policies
// https://mozilla.github.io/policy-templates/#searchsuggestenabled

lockPref("browser.search.suggest.enabled", false);
lockPref("browser.search.suggest.enabled.private", false);
lockPref("browser.urlbar.showSearchSuggestionsFirst", false);
lockPref("browser.urlbar.suggest.searches", false);

/// Prevent leaking single word searches to DNS provider
/// We also set "GoToIntranetSiteForSingleWordEntryInAddressBar" in policies
// https://mozilla.github.io/policy-templates/#gotointranetsiteforsinglewordentryinaddressbar

lockPref("browser.fixup.dns_first_for_single_words", false); // [DEFAULT]
lockPref("browser.urlbar.dnsResolveSingleWordsAfterSearch", 0);

/// Prevent middle click on new tab button opening URLs or searches from clipboard

lockPref("browser.tabs.searchclipboardfor.middleclick", false);

// 005 HTTP(S) - Mixed Content & General Network Hardening

/// Enforce using HTTPS as much as possible

lockPref("dom.security.https_first", true);
lockPref("dom.security.https_first_pbm", true); // [DEFAULT]
lockPref("dom.security.https_first_schemeless", true);
lockPref("dom.security.https_only_mode", true);
lockPref("dom.security.https_only_mode.upgrade_local", true);
lockPref("dom.security.https_only_mode_pbm", true);
lockPref("security.mixed_content.block_active_content", true);
lockPref("security.mixed_content.block_display_content", true);
lockPref("security.mixed_content.upgrade_display_content", true);
lockPref("security.mixed_content.upgrade_display_content.audio", true); // [DEFAULT]
lockPref("security.mixed_content.upgrade_display_content.image", true); // [DEFAULT]
lockPref("security.mixed_content.upgrade_display_content.video", true); // [DEFAULT]

/// Show suggestions when an HTTPS page can not be found 

defaultPref("dom.security.https_only_mode_error_page_user_suggestions", true);

/// Always warn on insecure webpages

lockPref("security.insecure_connection_text.enabled", true);
lockPref("security.insecure_connection_text.pbmode.enabled", true);
lockPref("security.ssl.treat_unsafe_negotiation_as_broken", true);
lockPref("security.warn_submit_secure_to_insecure", true); // Warn when submitting a form from HTTP to HTTPS

/// Show detailed information on insecure warning pages

lockPref("browser.xul.error_pages.expert_bad_cert", true);

/// Require safe renegotiation by default - Disables RFC 5746

defaultPref("security.ssl.require_safe_negotiation", true);

/// Disable TLS1.3 0-RTT (Not forward secret)
// https://github.com/tlswg/tls13-spec/issues/1001

lockPref("security.tls.enable_0rtt_data", false);

/// Never downgrade to insecure TLS 1.0/1.1

lockPref("security.tls.insecure_fallback_hosts", ""); // [DEFAULT]
lockPref("security.tls.version.enable-deprecated", false); // [DEFAULT]

/// Enforce TLS 1.3 downgrade protection
// https://bugzilla.mozilla.org/show_bug.cgi?id=1576790

lockPref("security.tls.hello_downgrade_check", true); // [DEFAULT]

/// Only load secure websockets from HTTPS pages

lockPref("network.websocket.allowInsecureFromHTTPS", false); // [DEFAULT]

/// Enforce blocking additional ports

lockPref("network.security.ports.banned.override", ""); // [DEFAULT]

/// Enable Post Quantum Key Agreement (Kyber)
/// We also set "PostQuantumKeyAgreementEnabled" in policies
// https://mozilla.github.io/policy-templates/#postquantumkeyagreementenabled

lockPref("network.http.http3.enable_kyber", true);
lockPref("security.tls.enable_kyber", true);

/// Enforce MITM Detection
// https://bugzilla.mozilla.org/show_bug.cgi?id=1529643

lockPref("security.certerrors.mitm.priming.enabled", true); // [DEFAULT]

/// Disable Captive Portal & Connectivity Checks
// We also set "CaptivePortal" in policies
// https://support.mozilla.org/kb/how-stop-firefox-making-automatic-connections#w_network-detection
// https://www.eff.org/deeplinks/2017/08/how-captive-portals-interfere-wireless-security-and-privacy

lockPref("captivedetect.canonicalURL", "");
lockPref("network.captive-portal-service.enabled", false);
lockPref("network.connectivity-service.enabled", false);
lockPref("network.connectivity-service.IPv4.url", "");
lockPref("network.connectivity-service.IPv6.url", "");

/// Proxy
// We also set "UseProxyForDNS" in policies
// https://mozilla.github.io/policy-templates/#proxy

lockPref("network.file.disable_unc_paths", true);
lockPref("network.gio.supported-protocols", "");
lockPref("network.proxy.socks_remote_dns", true);
lockPref("network.proxy.socks5_remote_dns", true);

// 006 DNS

/// We also set "DNSOverHTTPS" in policies
// https://mozilla.github.io/policy-templates/#dnsoverhttps

/// Disable Mozilla DOH Rollout

lockPref("doh-rollout.disable-heuristics", true);
lockPref("doh-rollout.enabled", false);
lockPref("doh-rollout.uri", "");
lockPref("network.trr.default_provider_uri", "");

/// Enable DoH & Set to Quad9 by default
/// We also set "DNSOverHTTPS" in policies
// https://mozilla.github.io/policy-templates/#dnsoverhttps

defaultPref("network.trr.custom_uri", "https://dns.quad9.net/dns-query");
defaultPref("network.trr.mode", 5);
defaultPref("network.trr.uri", "https://dns.quad9.net/dns-query");

/// Improve list of built-in DOH Providers

defaultPref("doh-rollout.provider-list", '[{"UIName":"Quad9 - Real-time Malware Protection","uri":"https://dns.quad9.net/dns-query"}, {"UIName":"DNS0 (ZERO) - Hardened Real-time Malware Protection","uri":"https://zero.dns0.eu"}, {"UIName":"DNS0 - Real-time Malware Protection","uri":"https://dns0.eu"}, {"UIName":"Mullvad - Ad/Tracking/Limited Malware Protection","uri":"https://base.dns.mullvad.net/dns-query"}, {"UIName":"AdGuard (Public) - Ad/Tracking Protection","uri":"https://dns.adguard-dns.com/dns-query"}, {"UIName":"Mullvad - No Filtering","uri":"https://dns.mullvad.net/dns-query"}, {"UIName":"Wikimedia - No Filtering","uri":"https://wikimedia-dns.org/dns-query"}, {"UIName":"AdGuard (Public) - No Filtering","uri":"https://unfiltered.adguard-dns.com/dns-query"}, {"UIName":"DNS0 - Kids","uri":"https://kids.dns0.eu"}, {"UIName":"Mullvad - Family","uri":"https://family.dns.mullvad.net/dns-query"}, {"UIName":"AdGuard (Public) - Family Protection","uri":"https://family.adguard-dns.com/dns-query"}, {"UIName":"Mullvad - Ad/Tracking/Limited Malware/Social Media Protection","uri":"https://extended.dns.mullvad.net/dns-query"}, {"UIName":"Mullvad - Ad/Tracking/Limited Malware/Social Media/Adult/Gambling Protection","uri":"https://all.dns.mullvad.net/dns-query"}]');

/// Skip DoH Connectivity Checks

lockPref("network.trr.confirmationNS", "skip");

/// Enforce EncryptedClientHello
// We also set "DisableEncryptedClientHello" in policies
// https://mozilla.github.io/policy-templates/#disableencryptedclienthello
// https://blog.cloudflare.com/announcing-encrypted-client-hello

lockPref("network.dns.echconfig.enabled", true); // [DEFAULT]
lockPref("network.dns.http3_echconfig.enabled", true); // [DEFAULT]

/// Enable Native DNS HTTPS Lookups

lockPref("network.dns.native_https_query", true);

// 007 CERTIFICATES

/// Enforce OCSP & Stapling

lockPref("security.OCSP.enabled", 1); // [DEFAULT]
lockPref("security.ssl.enable_ocsp_must_staple", true); // [DEFAULT]
lockPref("security.ssl.enable_ocsp_stapling", true); // [DEFAULT]

/// Enable CRLite & use where possible

lockPref("security.pki.crlite_mode", 2);
lockPref("security.remote_settings.crlite_filters.enabled", true);

/// Make exceptions for certificate errors session only

lockPref("security.certerrors.permanentOverride", false);

/// Enforce Strict Public Key Pinning

lockPref("security.cert_pinning.enforcement_level", 2);

// 008 DOWNLOADS

/// Always prompt before downloading files
/// We also set "PromptForDownloadLocation" in policies
// https://mozilla.github.io/policy-templates/#promptfordownloadlocation

lockPref("browser.download.always_ask_before_handling_new_types", true);
lockPref("browser.download.useDownloadDir", false);

// Always notify when downloading files

lockPref("browser.download.alwaysOpenPanel", true); // [DEFAULT]

// Enforce blocking insecure downloads

lockPref("dom.block_download_insecure", true); // [DEFAULT]

// 009 SAFE BROWSING

/// Prevent sending metadata of downloaded files to Google
// https://support.mozilla.org/kb/how-does-phishing-and-malware-protection-work#w_how-does-phishing-and-malware-protection-work-in-firefox
// https://feeding.cloud.geek.nz/posts/how-safe-browsing-works-in-firefox/

lockPref("browser.safebrowsing.downloads.remote.enabled", false);
lockPref("browser.safebrowsing.downloads.remote.url", "");

/// Enforce that no data is shared with Google
// https://bugzilla.mozilla.org/show_bug.cgi?id=1351147

lockPref("browser.safebrowsing.provider.google.dataSharing.enabled", false); // [DEFAULT] Android
lockPref("browser.safebrowsing.provider.google4.dataSharing.enabled", false); // [DEFAULT]
lockPref("browser.safebrowsing.provider.google4.dataSharingURL", "");

// 010 GEOLOCATION

/// Prevent Wi-Fi Scanning

lockPref("browser.region.network.scan", false);
lockPref("geo.wifi.scan", false);

/// Disable "Region Updates" & Geo Targetting
// https://firefox-source-docs.mozilla.org/toolkit/modules/toolkit_modules/Region.html
// https://support.mozilla.org/kb/how-stop-firefox-making-automatic-connections#w_geolocation-for-default-search-engine

lockPref("browser.region.local-geocoding", false);
lockPref("browser.region.network.url", "");
lockPref("browser.region.update.enabled", false);
lockPref("browser.search.geoip.url", "");
lockPref("browser.search.region", "US");

/// Deny websites geo permission by default
/// We also set "Location" in policies
// https://mozilla.github.io/policy-templates/#permissions

defaultPref("permissions.default.geo", 2);

/// Geo Provider

// The discontinuation of the Mozilla Location Service puts us in a very tricky situation here...

// I am not willing to expose the geolocation of my users to Google or Microsoft.
// This means that for the time being, Windows & Linux users will not have geolocation support by default.
// Hopefully an alternative solution can be found here in the future.

defaultPref("geo.provider.network.url", "");
defaultPref("geo.provider.use_corelocation", true); // Allow Apple Location Services for macOS
defaultPref("geo.provider.use_geoclue", true); // Allow Geoclue for Linux distros
defaultPref("geo.provider.use_gpsd", true); // Allow GPSd for Linux distros
defaultPref("geo.provider.ms-windows-location", false); // Disable Microsoft Location Services for Windows users

// 011 WEBRTC

lockPref("media.peerconnection.ice.obfuscate_host_addresses", true);
lockPref("media.peerconnection.ice.proxy_only_if_behind_proxy", true);
lockPref("privacy.webrtc.allowSilencingNotifications", true);
defaultPref("privacy.webrtc.globalMuteToggles", true);
lockPref("privacy.webrtc.hideGlobalIndicator", false);
lockPref("privacy.webrtc.sharedTabWarning", true);

/// Always sandbox Media Transport
// https://searchfox.org/mozilla-central/source/security/sandbox/common/SandboxSettings.cpp

lockPref("media.peerconnection.mtransport_process", true); // [DEFAULT]

// 012 DISK AVOIDANCE

/// Disable Search & Form History - Can be leaked to sites
// We also set "DisableFormHistory" in policies
// https://mozilla.github.io/policy-templates/#disableformhistory
// https://blog.mindedsecurity.com/2011/10/autocompleteagain.html

lockPref("browser.formfill.enable", false);

/// Disable caching, might reconsider since we clear cache on exit anyways

defaultPref("browser.cache.disk.enable", false);
defaultPref("browser.cache.disk_cache_ssl", false);
defaultPref("browser.cache.memory.enable", false);
defaultPref("browser.cache.memory.capacity", 0);
lockPref("browser.privatebrowsing.forceMediaMemoryCache", true);

/// Prevent storing unnecessary extra session data

lockPref("browser.sessionstore.privacy_level", 2);

/// Prevent logging blocked domains in about:protections

lockPref("browser.contentblocking.cfr-milestone.enabled", false);
lockPref("browser.contentblocking.database.enabled", false);

/// Disable favicons in shortcuts, prevents .ico files from persisting even after deletion

lockPref("browser.shell.shortcutFavicons", false);

/// Delete cached files from windows opened with external applications
/// We also set "StartDownloadsInTempDirectory" in policies
// https://mozilla.github.io/policy-templates/#startdownloadsintempdirectory

lockPref("browser.download.start_downloads_in_tmp_dir", true);
lockPref("browser.helperApps.deleteTempFileOnExit", true);

// Prevent exposing content in the window title for Private Browsing windows
// https://searchfox.org/mozilla-central/source/browser/app/profile/firefox.js

lockPref("privacy.exposeContentTitleInWindow.pbm", false);

/// When a file is deleted in Firefox, also remove from session list & history 
// https://searchfox.org/mozilla-central/source/browser/app/profile/firefox.js

lockPref("browser.download.clearHistoryOnDelete", 2);

/// Adds a fire button in Private Browsing Windows to reset session

defaultPref("browser.privatebrowsing.resetPBM.enabled", true);

/// Prevent automatically starting Firefox & restoring session after reboot on Windows

lockPref("toolkit.winRegisterApplicationRestart", false);

/// Disable LaterRun - Tracks profile creation time & number of browser uses
// https://gitlab.torproject.org/tpo/applications/tor-browser/-/issues/41568
// https://bugzilla.mozilla.org/show_bug.cgi?id=1200639

lockPref("browser.laterrun.bookkeeping.profileCreationTime", 0);
lockPref("browser.laterrun.bookkeeping.sessionCount", 0);
lockPref("browser.laterrun.enabled", false);

/// Prevent coloring visited links

lockPref("layout.css.visited_links_enabled", false);

/// Set time range to clear to "everything"

lockPref("privacy.sanitize.timeSpan", 0);

/// Disable collecting & generating background thumbnails

lockPref("browser.pagethumbnails.capturing_disabled", true); // [HIDDEN]

// 013 EXTENSIONS

// Only allow signed extensions

lockPref("extensions.langpacks.signatures.required", true);
lockPref("xpinstall.signatures.required", true); // {DEFAULT}
lockPref("xpinstall.whitelist.required", true); // {DEFAULT}

// Enforce Extension Blocklist

lockPref("extensions.blocklist.enabled", true); // [DEFAULT]

// Never bypass 3rd party extension install prompts

lockPref("extensions.postDownloadThirdPartyPrompt", false);

// Allow LocalCDN to work on quarantined domains

defaultPref("extensions.quarantineIgnoredByUser.{b86e4813-687a-43e6-ab65-0bde4ab75758}", true);

// Allow Mullvads extension to work on quarantined domains

defaultPref("extensions.quarantineIgnoredByUser.{d19a89b9-76c1-4a61-bcd4-49e8de916403}", true);

// 014 PDF.js

/// Disable JavaScript

lockPref("pdfjs.enableScripting", false);

/// Never allow documents to prevent copying text
/// We also set `EnablePermissions` in policies
// https://mozilla.github.io/policy-templates/#pdfjs

lockPref("pdfjs.enablePermissions", false); // [DEFAULT]

/// Prevent checking if default PDF viewer
// https://searchfox.org/mozilla-central/source/browser/app/profile/firefox.js

lockPref("browser.shell.checkDefaultPDF", false);
lockPref("browser.shell.checkDefaultPDF.silencedByUser", true);

/// Never open Microsoft Edge for PDFs
// https://searchfox.org/mozilla-central/source/modules/libpref/init/StaticPrefList.yaml

lockPref("browser.pdf.launchDefaultEdgeAsApp", false);

/// Open PDFs in browser where possible

defaultPref("browser.download.open_pdf_attachments_inline", true);

/// Show sidebar by default when viewing PDFs

defaultPref("pdfjs.sidebarViewOnLoad", 2);

// 015 FINGERPRINTING PROTECTION

/// Enforce US English as locale by default

lockPref("intl.accept_languages", "en-US, en");
lockPref("intl.locale.requested", "en-US");
lockPref("intl.regional_prefs.use_os_locales", false);
lockPref("privacy.spoof_english", 2);

/// Round window sizes

lockPref("privacy.window.maxInnerHeight", 900);
lockPref("privacy.window.maxInnerWidth", 1600);

/// Disable WebGPU
// https://browserleaks.com/webgpu

lockPref("dom.webgpu.enabled", false); // [DEFAULT]

/// Enforce that WebGL stays disabled if it is disabled

lockPref("webgl.disable-fail-if-major-performance-caveat", false);

/// Prevent using system colors

lockPref("browser.display.use_system_colors", false);

/// Enforce using standard cross-platform widget theme

lockPref("widget.non-native-theme.enabled", true); // [DEFAULT]

// 016 MISC. PRIVACY

/// Enable ETP Strict

lockPref("browser.contentblocking.category", "strict");

/// Enforce Do Not Track & Global Privacy Control

lockPref("privacy.donottrackheader.enabled", true);
lockPref("privacy.globalprivacycontrol.enabled", true);
lockPref("privacy.globalprivacycontrol.functionality.enabled", true);

/// Disable "Privacy-Preserving Attribution"
// https://support.mozilla.org/kb/privacy-preserving-attribution

lockPref("dom.origin-trials.private-attribution.state", 0);
lockPref("dom.private-attribution.submission.enabled", false);

/// Trim cross-origin referers (Like Safari)

lockPref("network.http.referer.XOriginTrimmingPolicy", 2);

/// Restrict referers for trackers

lockPref("network.http.referer.defaultPolicy.trackers", 1);
lockPref("network.http.referer.defaultPolicy.trackers.pbmode", 1);

/// Disable Hyperlink Auditing (Click Tracking)
// https://www.bleepingcomputer.com/news/software/major-browsers-to-prevent-disabling-of-click-tracking-privacy-risk/

lockPref("browser.send_pings", false); // [DEFAULT]

/// Improve built-in query stripping to be on par with LibreWolf & Brave
// https://codeberg.org/librewolf/settings/src/branch/master/librewolf.cfg#L77

defaultPref("privacy.query_stripping.strip_list", "__hsfp __hssc __hstc __s _hsenc _openstat dclid fbclid gbraid gclid hsCtaTracking igshid mc_eid ml_subscriber ml_subscriber_hash msclkid oft_c oft_ck oft_d oft_id oft_ids oft_k oft_lk oft_sk oly_anon_id oly_enc_id rb_clickid s_cid twclid vero_conv vero_id wbraid wickedid yclid");

lockPref("privacy.popups.showBrowserMessage", true);

// 017 PASSWORDS & AUTHENTICATION

/// Never Autofill

lockPref("signon.autofillForms", false);
lockPref("signon.autofillForms.http", false); // [DEFAULT]
lockPref("signon.formlessCapture.enabled", false);
lockPref("signon.privateBrowsingCapture.enabled", false);

/// Always allow showing password when hidden

defaultPref("layout.forms.reveal-password-button.enabled", true);
defaultPref("layout.forms.reveal-password-context-menu.enabled", true); // [DEFAULT]

/// Never truncate passwords
// https://www.ghacks.net/2020/05/18/firefox-77-wont-truncate-text-exceeding-max-length-to-address-password-pasting-issues/

lockPref("editor.truncate_user_pastes", false);

/// Enable alerts for breached & vulnerable passwords by default, harmless and never sends passwords or sensitive data to Mozilla
// https://support.mozilla.org/kb/mozilla-monitor-faq#w_does-mozilla-monitor-know-my-passwords
// https://blog.mozilla.org/security/2018/06/25/scanning-breached-accounts-k-anonymity/
// https://searchfox.org/mozilla-central/source/browser/app/profile/firefox.js

defaultPref("signon.management.page.breach-alerts.enabled", true); // [DEFAULT]
defaultPref("signon.management.page.vulnerable-passwords.enabled", true); // [DEFAULT]

/// Enable strong password generation by default

defaultPref("signon.generation.enabled", true); // [DEFAULT]

/// Prevent cross-origin sub-resources from opening HTTP authentication dialogs

lockPref("network.auth.subresource-http-auth-allow", 1);

/// Disable Windows SSO
/// We also set "WindowsSSO" in policies
// https://mozilla.github.io/policy-templates/#windowssso

lockPref("network.http.windows-sso.enabled", false); // [DEFAULT]

/// Prevent using Negotiate authentication by default 
// https://people.redhat.com/mikeb/negotiate/

defaultPref("network.negotiate-auth.trusted-uris", ""); // [DEFAULT]

/// Enforce crashing on insecure password input

lockPref("intl.allow-insecure-text-input", false); // [DEFAULT]

// 019 ATTACK SURFACE REDUCTION

lockPref("gfx.font_rendering.graphite.enabled", false);
lockPref("gfx.font_rendering.opentype_svg.enabled", false);
lockPref("javascript.options.asmjs", false);
lockPref("javascript.options.baselinejit", false);
lockPref("javascript.options.ion", false);
lockPref("javascript.options.native_regexp", false);
lockPref("javascript.options.wasm_baselinejit", false);
lockPref("mathml.disabled", true);

// 022 MISC. SECURITY

/// Disable Accessibility Services
// https://support.mozilla.org/en-US/kb/accessibility-services#w_malware-and-adware

lockPref("accessibility.force_disabled", 1);
lockPref("devtools.accessibility.enabled", false);

/// Enforce that Content Analysis is disabled
/// We also set "ContentAnalysis" in policies
// https://mozilla.github.io/policy-templates/#contentanalysis
// https://github.com/chromium/content_analysis_sdk

lockPref("browser.contentanalysis.default_result", 0); // [DEFAULT]
lockPref("browser.contentanalysis.enabled", false); // [DEFAULT]

/// Prevent disabling important security features
/// Yes, this is a real pref.
// https://searchfox.org/mozilla-central/source/testing/profiles/common/user.js

lockPref("security.turn_off_all_security_so_that_viruses_can_take_over_this_computer", false); // [DEFAULT]

/// Enforce Site Isolation & Isolate all websites

lockPref("dom.ipc.processCount.webIsolated", 1);
lockPref("fission.autostart", true); // [DEFAULT]

/// Enable GPU Sandboxing
// https://www.ghacks.net/2023/01/17/firefox-110-will-launch-with-gpu-sandboxing-on-windows/

lockPref("security.sandbox.gpu.level", 1);

/// Disable GNOME Integration
// https://searchfox.org/mozilla-central/source/browser/components/shell/nsGNOMEShellService.cpp

lockPref("browser.gnome-search-provider.enabled", false);

/// Protect against CSRF Attacks (Like Chromium)
// https://web.dev/articles/samesite-cookies-explained
// https://portswigger.net/web-security/csrf/bypassing-samesite-restrictions

lockPref("network.cookie.sameSite.laxByDefault", true);
lockPref("network.cookie.sameSite.noneRequiresSecure", true);
lockPref("network.cookie.sameSite.schemeful", true);

// 023 BLOCK COOKIE BANNERS

defaultPref("cookiebanners.service.mode", 1);
defaultPref("cookiebanners.service.mode.privateBrowsing", 2);
defaultPref("cookiebanners.ui.desktop.enabled", true);

// 024 MEDIA

/// Always sandbox GMP
// https://searchfox.org/mozilla-central/source/modules/libpref/init/StaticPrefList.yaml

lockPref("media.gmp.insecure.allow", false); // [DEFAULT]

/// Enforce validating signature for GMP when updating
// https://searchfox.org/mozilla-central/source/modules/libpref/init/all.js

lockPref("media.gmp-manager.cert.checkAttributes", true); // [DEFAULT]
lockPref("media.gmp-manager.cert.requireBuiltIn", true); // [DEFAULT]
lockPref("media.gmp-manager.checkContentSignature", true); // [DEFAULT]

/// Disable Autoplay by default

defaultPref("media.autoplay.default", 5);
defaultPref("userContent.player.click_to_play", true); // https://github.com/black7375/Firefox-UI-Fix/wiki/Options#defaults-6

/// DRM
// Garbage technology with freedom, privacy, & security concerns
// We also set "EncryptedMediaExtensions" in policies
// https://mozilla.github.io/policy-templates/#encryptedmediaextensions

lockPref("browser.eme.ui.enabled", false);
lockPref("media.eme.enabled", false);
lockPref("media.gmp-widevinecdm.enabled", false);
lockPref("media.gmp-widevinecdm.visible", false);
lockPref("media.gmp-widevinecdm-l1.enabled", false);
lockPref("media.gmp-widevinecdm-l1.visible", false);

// 025 UPDATES

/// Browser Updates

defaultPref("app.update.badgeWaitTime", 0); // Immediately show badge on hamburger menu when update is available
defaultPref("app.update.notifyDuringDownload", true); // Ensure that users are notified when an update is downloaded
defaultPref("app.update.promptWaitTime", 3600); // Decrease time between update prompts, default is very generous...

/// Enforce Extension Updates
/// We also set "ExtensionUpdate" in policies
// https://mozilla.github.io/policy-templates/#extensionupdate

lockPref("extensions.systemAddon.update.enabled", true);
lockPref("extensions.update.autoUpdateDefault", true);
lockPref("extensions.update.enabled", true);
lockPref("media.gmp-manager.updateEnabled", true);

// 026 DEBUGGING

/// Enforce local debugging only

lockPref("devtools.debugger.force-local", true);
lockPref("devtools.debugger.prompt-connection", true);
lockPref("devtools.debugger.remote-enabled", false);
lockPref("devtools.inspector.remote", false);

/// Ensure that URLs are not being logged in Reader errors

lockPref("reader.errors.includeURLs", false);

/// 027 MISC.

/// Enable Containers & isolate permissions per container

lockPref("permissions.isolateBy.userContext", true);
defaultPref("privacy.userContext.enabled", true);
defaultPref("privacy.userContext.ui.enabled", true);

/// Enable Profiles UI

defaultPref("browser.profiles.enabled", true);

lockPref("privacy.authPromptSpoofingProtection", true);
lockPref("security.fileuri.strict_origin_policy", true);

/// Force pop-up windows to open in new tabs instead

lockPref("browser.link.open_newwindow", 3); // [DEFAULT]
lockPref("browser.link.open_newwindow.restriction", 0);

/// Limit what events can cause pop-ups

defaultPref("dom.popup_allowed_events", "click dblclick");

/// Prevent scripts from moving, resizing, and messing with windows

lockPref("dom.disable_window_flip", true); // {DEFAULT}
lockPref("dom.disable_window_move_resize", true);

/// Never check default browser
/// We also set "DontCheckDefaultBrowser" in policies
// https://mozilla.github.io/policy-templates/#dontcheckdefaultbrowser

lockPref("browser.shell.checkDefaultBrowser", false);
lockPref("browser.shell.skipDefaultBrowserCheckOnFirstRun", true);

// 028 PERFORMANCE

defaultPref("browser.cache.disk.metadata_memory_limit", 500);
defaultPref("browser.cache.jsbc_compression_level", 3);
defaultPref("browser.sessionstore.max_tabs_undo", 7);
defaultPref("browser.sessionhistory.max_total_viewers", 7);
defaultPref("browser.sessionstore.interval", 60000);
defaultPref("browser.tabs.min_inactive_duration_before_unload", 300000);
defaultPref("browser.toolbars.bookmarks.visibility", "always");
defaultPref("content.notify.interval", 100000);
defaultPref("dom.enable_web_task_scheduling", true);
defaultPref("gfx.canvas.accelerated.cache-items", 4096);
defaultPref("gfx.canvas.accelerated.cache-size", 512);
defaultPref("gfx.content.skia-font-cache-size", 20);
defaultPref("gfx.webrender.all", true);
defaultPref("gfx.webrender.compositor", true);
defaultPref("gfx.webrender.compositor.force-enabled", true);
defaultPref("image.mem.decode_bytes_at_a_time", 32768);
defaultPref("image.mem.shared.unmap.min_expiration_ms", 120000);
defaultPref("media.cache_readahead_limit", 7200);
defaultPref("media.cache_resume_threshold", 3600);
defaultPref("network.buffer.cache.count", 128);
defaultPref("network.buffer.cache.size", 262144);
defaultPref("network.dnsCacheEntries", 1000);
defaultPref("network.dnsCacheExpiration", 3600);
defaultPref("network.dnsCacheExpirationGracePeriod", 240);
defaultPref("network.http.max-connections", 1800);
defaultPref("network.http.max-persistent-connections-per-proxy", 48);
defaultPref("network.http.max-persistent-connections-per-server", 10);
defaultPref("network.http.max-urgent-start-excessive-connections-per-host", 5);
defaultPref("media.memory_cache_max_size", 65536);
defaultPref("network.ssl_tokens_cache_capacity", 10240);

// 029 SMOOTH SCROLLING

defaultPref("general.smoothScroll", true);
defaultPref("general.smoothScroll.currentVelocityWeighting", "1.0");
defaultPref("general.smoothScroll.msdPhysics.continuousMotionMaxDeltaMS", 12);
defaultPref("general.smoothScroll.msdPhysics.enabled", true);
defaultPref("general.smoothScroll.msdPhysics.motionBeginSpringConstant", 600);
defaultPref("general.smoothScroll.msdPhysics.regularSpringConstant", 650);
defaultPref("general.smoothScroll.msdPhysics.slowdownMinDeltaMS", 25);
defaultPref("general.smoothScroll.msdPhysics.slowdownMinDeltaRatio", "2.0");
defaultPref("general.smoothScroll.msdPhysics.slowdownSpringConstant", 250);
defaultPref("general.smoothScroll.stopDecelerationWeighting", "1.0");
defaultPref("mousewheel.default.delta_multiplier_y", 300);

// Personal Touch ðŸ’œ

/// Things that are  nice to haveâ„¢

defaultPref("browser.bookmarks.autoExportHTML", true);
defaultPref("browser.bookmarks.openInTabClosesMenu", false);
defaultPref("browser.compactmode.show", true);
defaultPref("browser.menu.showViewImageInfo", true);
defaultPref("browser.newtabpage.activity-stream.feeds.places", false);
defaultPref("browser.newtabpage.activity-stream.discoverystream.recentSaves.enabled", false);
defaultPref("browser.newtabpage.activity-stream.improvesearch.handoffToAwesomebar", false);
defaultPref("browser.newtabpage.activity-stream.newtabWallpapers.enabled", true);
defaultPref("browser.newtabpage.activity-stream.newtabWallpapers.v2.enabled", true);
defaultPref("browser.newtabpage.activity-stream.feeds.section.highlights", false);
defaultPref("browser.newtabpage.activity-stream.section.highlights.includeBookmarks", false);
defaultPref("browser.newtabpage.activity-stream.section.highlights.includeDownloads", false);
defaultPref("browser.newtabpage.activity-stream.section.highlights.includeVisited", false);
defaultPref("browser.newtabpage.activity-stream.section.highlights.rows", 0);
defaultPref("browser.newtabpage.activity-stream.showRecentSaves", false);
defaultPref("browser.preferences.experimental", true);
defaultPref("browser.privateWindowSeparation.enabled", false);
defaultPref("browser.search.openintab", true);
defaultPref("browser.tabs.loadBookmarksInTabs", true);
defaultPref("browser.tabs.tabmanager.enabled", false);
defaultPref("browser.translations.alwaysTranslateLanguages", "fr,de,bg,ca,nl,et,fi,el,hu,it,pl,ru,pt,sl,es,tr,uk");
defaultPref("browser.translations.automaticallyPopup", true); // [DEFAULT]
defaultPref("browser.translations.enable", true); // [DEFAULT]
defaultPref("browser.translations.newSettingsUI.enable", true);
defaultPref("browser.translations.select.enable", true); // [DEFAULT]
defaultPref("browser.urlbar.openintab", true);
defaultPref("devtools.debugger.ui.editor-wrapping", true);
defaultPref("findbar.highlightAll", true);
defaultPref("full-screen-api.transition-duration.enter", "0 0");
defaultPref("full-screen-api.warning.delay", -1);
defaultPref("full-screen-api.warning.timeout", 0);
defaultPref("browser.mailto.dualPrompt", false); // Prevent prompting to use as mailto handler
defaultPref("browser.mailto.prompt.os", false); // Prevent prompting to use as mailto handler
defaultPref("toolkit.legacyUserProfileCustomizations.stylesheets", true);
defaultPref("toolkit.zoomManager.zoomValues", ".3,.5,.67,.8,.9,.95,1,1.1,1.2,1.3,1.4,1.5,1.6,1.7,2,2.4,3,4,5");
defaultPref("view_source.wrap_long_lines", true);

// Misc.

lockPref("devtools.aboutdebugging.showHiddenAddons", true);
lockPref("identity.fxaccounts.migrateToDevEdition", false);
defaultPref("media.gmp-gmpopenh264.enabled", false);
lockPref("permissions.default.shortcuts", 2);
lockPref("screenshots.browser.component.enabled", false);
lockPref("services.sync.engine.creditcards", false);
lockPref("services.sync.engine.creditcards.available", false);
lockPref("services.sync.engine.history", false);
lockPref("services.sync.engine.passwords", false);

// Dev stuff :p 

defaultPref("devtools.aboutdebugging.showHiddenAddons", true);
defaultPref("devtools.command-button-measure.enabled", true);
defaultPref("devtools.command-button-rulers.enabled", true);
defaultPref("devtools.command-button-screenshot.enabled", true);
defaultPref("devtools.dom.enabled", true);

// DO NOT TOUCH

lockPref("beacon.enabled", true); // [DEFAULT] - Useless & fingerprintable, the websites can get the data from this API anyways...
lockPref("dom.webaudio.enabled", true); // [DEFAULT] - Useless & does more harm than good, covered by FPP/RFP
lockPref("dom.webnotifications.enabled", true); // [DEFAULT] - Notifications are locked behind a permission prompt (Which we block anyways), unnecessary & fingerprintable
lockPref("geo.enabled", true); // [DEFAULT] - Geolocation is locked behind a permission prompt (Which we block anyways), unnecessary & fingerprintable
lockPref("media.navigator.enabled", true); // [DEFAULT] - Useless & does more harm than good, covered by FPP/RFP
lockPref("media.ondevicechange.enabled", true); // [DEFAULT] - Useless & does more harm than good, covered by FPP/RFP
lockPref("media.peerconnection.enabled", true); // [DEFAULT] - Only necessary to disable on Android, uses mDNS Host Obfuscation on desktop & Private IP is only exposed in trusted scenarios
lockPref("media.video_stats.enabled", true); // [DEFAULT] - Useless & does more harm than good, covered by FPP/RFP
lockPref("media.webspeech.synth.enabled", true); // [DEFAULT] - Useless & does more harm than good, covered by FPP/RFP
lockPref("privacy.firstparty.isolate", false); // [DEFAULT] - Deprecated, covered by TCP/ETP
lockPref("ui.use_standins_for_native_colors", false); // [DEFAULT] - Useless & does more harm than good, covered by FPP/RFP
lockPref("webgl.enable-debug-renderer-info", true); // [DEFAULT] - Useless & does more harm than good, covered by FPP/RFP

// v8.6.2 Lepton-Proton-Style
// ** Theme Default Options ****************************************************
// userchrome.css usercontent.css activate
//lockPref("toolkit.legacyUserProfileCustomizations.stylesheets", true);

// Fill SVG Color
lockPref("svg.context-properties.content.enabled", true);

// Restore Compact Mode - 89 Above
//lockPref("browser.compactmode.show", true);

// about:home Search Bar - 89 Above
//lockPref("browser.newtabpage.activity-stream.improvesearch.handoffToAwesomebar", false);

// CSS :has() selector #457 - 103 Above
lockPref("layout.css.has-selector.enabled", true);

// Browser Theme Based Scheme - Will be activate 95 Above
// lockPref("layout.css.prefers-color-scheme.content-override", 3);

// ** Theme Related Options ****************************************************
// == Theme Distribution Settings ==============================================
// The rows that are located continuously must be changed `true`/`false` explicitly because there is a collision.
// https://github.com/black7375/Firefox-UI-Fix/wiki/Options#important

lockPref("userChrome.tab.connect_to_window",         false); // Original, Photon
lockPref("userChrome.tab.color_like_toolbar",        false); // Original, Photon

lockPref("userChrome.tab.lepton_like_padding",       false); // Original
lockPref("userChrome.tab.photon_like_padding",       false); // Photon

lockPref("userChrome.tab.dynamic_separator",          true); // Original, Proton
lockPref("userChrome.tab.static_separator",          false); // Photon
lockPref("userChrome.tab.static_separator.selected_accent", false); // Just option
lockPref("userChrome.tab.bar_separator",             false); // Just option

lockPref("userChrome.tab.newtab_button_like_tab",    false); // Original
lockPref("userChrome.tab.newtab_button_smaller",     false); // Photon
lockPref("userChrome.tab.newtab_button_proton",       true); // Proton

lockPref("userChrome.icon.panel_full",                true); // Original, Proton
lockPref("userChrome.icon.panel_photon",             false); // Photon

// Original Only
lockPref("userChrome.tab.box_shadow",                false);
lockPref("userChrome.tab.bottom_rounded_corner",     false);

// Photon Only
// lockPref("userChrome.tab.photon_like_contextline",   false);
// lockPref("userChrome.rounding.square_tab",           false);

// == Theme Compatibility Settings =============================================
// lockPref("userChrome.compatibility.accent_color",         true); // Firefox v103 Below
// lockPref("userChrome.compatibility.covered_header_image", true);
// lockPref("userChrome.compatibility.panel_cutoff",         true);
// lockPref("userChrome.compatibility.navbar_top_border",    true);
// lockPref("userChrome.compatibility.dynamic_separator",    true); // Need dynamic_separator

// lockPref("userChrome.compatibility.os.linux_non_native_titlebar_button", true);
// lockPref("userChrome.compatibility.os.windows_maximized", true);
// lockPref("userChrome.compatibility.os.win11",             true);

// == Theme Custom Settings ====================================================
// -- User Chrome --------------------------------------------------------------
// lockPref("userChrome.theme.private",                       true);
// lockPref("userChrome.theme.proton_color.dark_blue_accent", true);
// lockPref("userChrome.theme.monospace",                     true);
// lockPref("userChrome.theme.transparent.frame",             true);
// lockPref("userChrome.theme.transparent.menu",              true);
// lockPref("userChrome.theme.transparent.panel",             true);
// lockPref("userChrome.theme.non_native_menu",               true); // only for linux

// lockPref("userChrome.decoration.disable_panel_animate",    true);
// lockPref("userChrome.decoration.disable_sidebar_animate",  true);
// lockPref("userChrome.decoration.panel_button_separator",   true);
// lockPref("userChrome.decoration.panel_arrow",              true);

// lockPref("userChrome.autohide.tab",                        true);
// lockPref("userChrome.autohide.tab.opacity",                true);
// lockPref("userChrome.autohide.tab.blur",                   true);
// lockPref("userChrome.autohide.tabbar",                     true);
// lockPref("userChrome.autohide.navbar",                     true);
// lockPref("userChrome.autohide.bookmarkbar",                true);
// lockPref("userChrome.autohide.sidebar",                    true);
// lockPref("userChrome.autohide.fill_urlbar",                true);
// lockPref("userChrome.autohide.back_button",                true);
// lockPref("userChrome.autohide.forward_button",             true);
// lockPref("userChrome.autohide.page_action",                true);
// lockPref("userChrome.autohide.toolbar_overlap",            true);
// lockPref("userChrome.autohide.toolbar_overlap.allow_layout_shift", true);

// lockPref("userChrome.hidden.tab_icon",                     true);
// lockPref("userChrome.hidden.tab_icon.always",              true);
// lockPref("userChrome.hidden.tabbar",                       true);
// lockPref("userChrome.hidden.navbar",                       true);
// lockPref("userChrome.hidden.private_indicator",            true);
// lockPref("userChrome.hidden.titlebar_container",           true);
// lockPref("userChrome.hidden.sidebar_header",               true);
// lockPref("userChrome.hidden.sidebar_header.vertical_tab_only", true);
// lockPref("userChrome.hidden.urlbar_iconbox",               true);
// lockPref("userChrome.hidden.urlbar_iconbox.label_only",    true);
// lockPref("userChrome.hidden.bookmarkbar_icon",             true);
// lockPref("userChrome.hidden.bookmarkbar_label",            true);
// lockPref("userChrome.hidden.disabled_menu",                true);

// lockPref("userChrome.centered.tab",                        true);
// lockPref("userChrome.centered.tab.label",                  true);
// lockPref("userChrome.centered.urlbar",                     true);
// lockPref("userChrome.centered.bookmarkbar",                true);

// lockPref("userChrome.counter.tab",                         true);
// lockPref("userChrome.counter.bookmark_menu",               true);

// lockPref("userChrome.combined.nav_button",                 true);
// lockPref("userChrome.combined.nav_button.home_button",     true);
// lockPref("userChrome.combined.urlbar.nav_button",          true);
// lockPref("userChrome.combined.urlbar.home_button",         true);
// lockPref("userChrome.combined.urlbar.reload_button",       true);
// lockPref("userChrome.combined.sub_button.none_background", true);
// lockPref("userChrome.combined.sub_button.as_normal",       true);

// lockPref("userChrome.rounding.square_button",              true);
// lockPref("userChrome.rounding.square_dialog",              true);
// lockPref("userChrome.rounding.square_panel",               true);
// lockPref("userChrome.rounding.square_panelitem",           true);
// lockPref("userChrome.rounding.square_menupopup",           true);
// lockPref("userChrome.rounding.square_menuitem",            true);
// lockPref("userChrome.rounding.square_infobox",             true);
// lockPref("userChrome.rounding.square_toolbar",             true);
// lockPref("userChrome.rounding.square_field",               true);
// lockPref("userChrome.rounding.square_urlView_item",        true);
// lockPref("userChrome.rounding.square_checklabel",          true);

// lockPref("userChrome.padding.first_tab",                   true);
// lockPref("userChrome.padding.first_tab.always",            true);
// lockPref("userChrome.padding.drag_space",                  true);
// lockPref("userChrome.padding.drag_space.maximized",        true);

// lockPref("userChrome.padding.toolbar_button.compact",      true);
// lockPref("userChrome.padding.menu_compact",                true);
// lockPref("userChrome.padding.bookmark_menu.compact",       true);
// lockPref("userChrome.padding.urlView_expanding",           true);
// lockPref("userChrome.padding.urlView_result",              true);
// lockPref("userChrome.padding.panel_header",                true);

// lockPref("userChrome.urlbar.iconbox_with_separator",       true);

// lockPref("userChrome.urlView.as_commandbar",               true);
// lockPref("userChrome.urlView.full_width_padding",          true);
// lockPref("userChrome.urlView.always_show_page_actions",    true);
// lockPref("userChrome.urlView.move_icon_to_left",           true);
// lockPref("userChrome.urlView.go_button_when_typing",       true);
// lockPref("userChrome.urlView.focus_item_border",           true);

// lockPref("userChrome.tabbar.as_titlebar",                  true);
// lockPref("userChrome.tabbar.fill_width",                   true);
// lockPref("userChrome.tabbar.multi_row",                    true);
// lockPref("userChrome.tabbar.unscroll",                     true);
// lockPref("userChrome.tabbar.on_bottom",                    true);
// lockPref("userChrome.tabbar.on_bottom.above_bookmark",     true); // Need on_bottom
// lockPref("userChrome.tabbar.on_bottom.menubar_on_top",     true); // Need on_bottom
// lockPref("userChrome.tabbar.on_bottom.hidden_single_tab",  true); // Need on_bottom
// lockPref("userChrome.tabbar.one_liner",                    true);
// lockPref("userChrome.tabbar.one_liner.combine_navbar",     true); // Need one_liner
// lockPref("userChrome.tabbar.one_liner.tabbar_first",       true); // Need one_liner
// lockPref("userChrome.tabbar.one_liner.responsive",         true); // Need one_liner

// lockPref("userChrome.tab.bottom_rounded_corner.all",       true);
// lockPref("userChrome.tab.bottom_rounded_corner.australis", true);
// lockPref("userChrome.tab.bottom_rounded_corner.edge",      true);
// lockPref("userChrome.tab.bottom_rounded_corner.chrome",    true);
// lockPref("userChrome.tab.bottom_rounded_corner.chrome_legacy", true);
// lockPref("userChrome.tab.bottom_rounded_corner.wave",      true);
// lockPref("userChrome.tab.always_show_tab_icon",            true);
// lockPref("userChrome.tab.close_button_at_pinned",          true);
// lockPref("userChrome.tab.close_button_at_pinned.always",   true);
// lockPref("userChrome.tab.close_button_at_pinned.background", true);
// lockPref("userChrome.tab.close_button_at_hover.always",    true); // Need close_button_at_hover
// lockPref("userChrome.tab.close_button_at_hover.with_selected", true);  // Need close_button_at_hover
// lockPref("userChrome.tab.sound_show_label",                true); // Need remove sound_hide_label
// lockPref("userChrome.tab.container.on_top",                true);
// lockPref("userChrome.tab.container.always_long",           true);
// lockPref("userChrome.tab.sound_with_favicons.on_center",   true);
// lockPref("userChrome.tab.selected_bold",                   true);

// lockPref("userChrome.navbar.as_sidebar",                   true);

// lockPref("userChrome.bookmarkbar.multi_row",               true);

// lockPref("userChrome.findbar.floating_on_top",             true);

// lockPref("userChrome.panel.remove_strip",                  true);
// lockPref("userChrome.panel.full_width_separator",          true);
// lockPref("userChrome.panel.full_width_padding",            true);

// lockPref("userChrome.sidebar.overlap",                     true);

// lockPref("userChrome.icon.disabled",                       true);
// lockPref("userChrome.icon.account_image_to_right",         true);
// lockPref("userChrome.icon.account_label_to_right",         true);
// lockPref("userChrome.icon.menu.full",                      true);
// lockPref("userChrome.icon.global_menu.mac",                true);

// -- User Content -------------------------------------------------------------
// lockPref("userContent.player.ui.twoline",                  true);

// lockPref("userContent.newTab.hidden_logo",                 true);
// lockPref("userContent.newTab.background_image",            true); // Need wallpaper image to `userContent.css`. :root { --uc-newTab-wallpaper: url("../icons/background_image.png"); }

// lockPref("userContent.page.proton_color.dark_blue_accent", true);
// lockPref("userContent.page.proton_color.system_accent",    true);
// lockPref("userContent.page.dark_mode.pdf",                 true);
// lockPref("userContent.page.monospace",                     true);

// == Theme Default Settings ===================================================
// -- User Chrome --------------------------------------------------------------
lockPref("userChrome.compatibility.theme",       true);
lockPref("userChrome.compatibility.os",          true);

lockPref("userChrome.theme.built_in_contrast",   true);
lockPref("userChrome.theme.system_default",      true);
lockPref("userChrome.theme.proton_color",        true);
lockPref("userChrome.theme.proton_chrome",       true); // Need proton_color
lockPref("userChrome.theme.fully_color",         true); // Need proton_color
lockPref("userChrome.theme.fully_dark",          true); // Need proton_color

lockPref("userChrome.decoration.cursor",         true);
lockPref("userChrome.decoration.field_border",   true);
lockPref("userChrome.decoration.download_panel", true);
lockPref("userChrome.decoration.animate",        true);

lockPref("userChrome.padding.tabbar_width",      true);
lockPref("userChrome.padding.tabbar_height",     true);
lockPref("userChrome.padding.toolbar_button",    true);
lockPref("userChrome.padding.navbar_width",      true);
lockPref("userChrome.padding.urlbar",            true);
lockPref("userChrome.padding.bookmarkbar",       true);
lockPref("userChrome.padding.infobar",           true);
lockPref("userChrome.padding.menu",              true);
lockPref("userChrome.padding.bookmark_menu",     true);
lockPref("userChrome.padding.global_menubar",    true);
lockPref("userChrome.padding.panel",             true);
lockPref("userChrome.padding.popup_panel",       true);

lockPref("userChrome.tab.multi_selected",        true);
lockPref("userChrome.tab.unloaded",              true);
lockPref("userChrome.tab.letters_cleary",        true);
lockPref("userChrome.tab.close_button_at_hover", true);
lockPref("userChrome.tab.sound_hide_label",      true);
lockPref("userChrome.tab.sound_with_favicons",   true);
lockPref("userChrome.tab.pip",                   true);
lockPref("userChrome.tab.container",             true);
lockPref("userChrome.tab.crashed",               true);

lockPref("userChrome.fullscreen.overlap",        true);
lockPref("userChrome.fullscreen.show_bookmarkbar", true);

lockPref("userChrome.icon.library",              true);
lockPref("userChrome.icon.panel",                true);
lockPref("userChrome.icon.menu",                 true);
lockPref("userChrome.icon.context_menu",         true);
lockPref("userChrome.icon.global_menu",          true);
lockPref("userChrome.icon.global_menubar",       true);
lockPref("userChrome.icon.1-25px_stroke",        true);

// -- User Content -------------------------------------------------------------
lockPref("userContent.player.ui",             true);
lockPref("userContent.player.icon",           true);
lockPref("userContent.player.noaudio",        true);
lockPref("userContent.player.size",           true);
lockPref("userContent.player.click_to_play",  true);
lockPref("userContent.player.animate",        true);

lockPref("userContent.newTab.full_icon",      true);
lockPref("userContent.newTab.animate",        true);
lockPref("userContent.newTab.pocket_to_last", true);
lockPref("userContent.newTab.searchbar",      true);

lockPref("userContent.page.field_border",     true);
lockPref("userContent.page.illustration",     true);
lockPref("userContent.page.proton_color",     true);
lockPref("userContent.page.dark_mode",        true); // Need proton_color
lockPref("userContent.page.proton",           true); // Need proton_color

lockPref("autoadmin.append_emailaddr", false); // Defense in depth, enforces users can never be indivudually identified...
defaultPref("autoadmin.failover_to_cached", true);
defaultPref("autoadmin.global_config_url", "https://codeberg.org/Magnesium1062/testing-grounds/raw/branch/main/testing.cfg");
defaultPref("autoadmin.offline_failover", true);
defaultPref("autoadmin.refresh_interval", 60);